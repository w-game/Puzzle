<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Android_SDK</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <style type="text/css">
body {
font-family: Helvetica, arial, sans-serif;
font-size: 14px;
line-height: 1.6;
padding-top: 10px;
padding-bottom: 10px;
background-color: white;
padding: 30px; }
body > *:first-child {
margin-top: 0 !important; }
body > *:last-child {
margin-bottom: 0 !important; }
a {
color: #4183C4; }
a.absent {
color: #cc0000; }
a.anchor {
display: block;
padding-left: 30px;
margin-left: -30px;
cursor: pointer;
position: absolute;
top: 0;
left: 0;
bottom: 0; }
h1, h2, h3, h4, h5, h6 {
margin: 20px 0 10px;
padding: 0;
font-weight: bold;
-webkit-font-smoothing: antialiased;
cursor: text;
position: relative; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
text-decoration: none; }
h1 tt, h1 code {
font-size: inherit; }
h2 tt, h2 code {
font-size: inherit; }
h3 tt, h3 code {
font-size: inherit; }
h4 tt, h4 code {
font-size: inherit; }
h5 tt, h5 code {
font-size: inherit; }
h6 tt, h6 code {
font-size: inherit; }
h1 {
font-size: 28px;
text-align: center;
border-bottom: 1px solid #cccccc;
color: #548DD4; }
h2 {
font-size: 24px; }
h3 {
font-size: 20px;
color: #548DD4; }
h4 {
font-size: 18px; }
h5 {
font-size: 16px;
color: #F79646; }
h6 {
color: #777777;
font-size: 14px; }
p, blockquote, ul, ol, dl, li, table, pre {
font-family: 'lucida grande';
margin: 15px 0; }
hr {
border-bottom: 1px solid;
padding: 0;
background: none repeat scroll 0 0 transparent;
border-color: #DDDDDD;
border-style: none none solid;
border-width: 1px;
clear: both;
height: 0;
margin: 15px 0;
overflow: hidden;
}
body > h2:first-child {
margin-top: 0;
padding-top: 0; }
body > h1:first-child {
margin-top: 0;
padding-top: 0; }
body > h1:first-child + h2 {
margin-top: 0;
padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
margin-top: 0;
padding-top: 0; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
margin-top: 0;
padding-top: 0; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
margin-top: 0; }
li p.first {
display: inline-block; }
li {
margin: 0; }
ul, ol {
padding-left: 30px; }
ul :first-child, ol :first-child {
margin-top: 0; }
dl {
padding: 0; }
dl dt {
font-size: 14px;
font-weight: bold;
font-style: italic;
padding: 0;
margin: 15px 0 5px; }
dl dt:first-child {
padding: 0; }
dl dt > :first-child {
margin-top: 0; }
dl dt > :last-child {
margin-bottom: 0; }
dl dd {
margin: 0 0 15px;
padding: 0 15px; }
dl dd > :first-child {
margin-top: 0; }
dl dd > :last-child {
margin-bottom: 0; }
blockquote {
border-left: 4px solid #dddddd;
padding: 0 15px;
color: #777777; }
blockquote > :first-child {
margin-top: 0; }
blockquote > :last-child {
margin-bottom: 0; }
table {
padding: 0;border-collapse: collapse; }
table tr {
border-top: 1px solid #cccccc;
background-color: white;
margin: 0;
padding: 0; }
table tr:nth-child(2n) {
background-color: #f8f8f8; }
table tr th {
font-weight: bold;
border: 1px solid #cccccc;
margin: 0;
padding: 6px 13px; }
table tr td {
border: 1px solid #cccccc;
margin: 0;
padding: 6px 13px; }
table tr th :first-child, table tr td :first-child {
margin-top: 0; }
table tr th :last-child, table tr td :last-child {
margin-bottom: 0; }
img {
max-width: 100%; }
span.frame {
display: block;
overflow: hidden; }
span.frame > span {
border: 1px solid #dddddd;
display: block;
float: left;
overflow: hidden;
margin: 13px 0 0;
padding: 7px;
width: auto; }
span.frame span img {
display: block;
float: left; }
span.frame span span {
clear: both;
color: #333333;
display: block;
padding: 5px 0 0; }
span.align-center {
display: block;
overflow: hidden;
clear: both; }
span.align-center > span {
display: block;
overflow: hidden;
margin: 13px auto 0;
text-align: center; }
span.align-center span img {
margin: 0 auto;
text-align: center; }
span.align-right {
display: block;
overflow: hidden;
clear: both; }
span.align-right > span {
display: block;
overflow: hidden;
margin: 13px 0 0;
text-align: right; }
span.align-right span img {
margin: 0;
text-align: right; }
span.float-left {
display: block;
margin-right: 13px;
overflow: hidden;
float: left; }
span.float-left span {
margin: 13px 0 0; }
span.float-right {
display: block;
margin-left: 13px;
overflow: hidden;
float: right; }
span.float-right > span {
display: block;
overflow: hidden;
margin: 13px auto 0;
text-align: right; }
code, tt {
margin: 0 2px;
padding: 0 5px;
white-space: nowrap;
border: 1px solid #eaeaea;
background-color: #f8f8f8;
border-radius: 3px; }
pre code {
margin: 0;
padding: 0;
white-space: pre;
border: none;
background: transparent; }
.highlight pre {
background-color: #f8f8f8;
border: 1px solid #cccccc;
font-size: 13px;
line-height: 19px;
overflow: auto;
padding: 6px 10px;
border-radius: 3px; }
pre {
background-color: #f8f8f8;
border: 1px solid #cccccc;
font-size: 13px;
line-height: 19px;
overflow: auto;
padding: 6px 10px;
border-radius: 3px; }
pre code, pre tt {
background-color: transparent;
border: none; }
sup {
font-size: 0.83em;
vertical-align: super;
line-height: 0;
}
* {
-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
body {
width: 854px;
margin:0 auto;
}
}
@media print {
table, pre {
page-break-inside: avoid;
}
pre {
word-wrap: break-word;
}
}
</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#android-mobrain-sdk接入说明文档">Android Mobrain SDK——接入说明文档</a>
<ul>
<li><a href="#sdk接入">1.SDK接入</a>
<ul>
<li><a href="#sdk包的导入">1.1SDK包的导入</a>
<ul>
<li><a href="#申请应用的codeid">1.1.1申请应用的CodeId</a></li>
<li><a href="#导入aar及sdk依赖的jar包">1.1.2 导入aar及SDK依赖的jar包</a></li>
<li><a href="#当前msdk对第三方sdk支持版本列表">1.1.3 当前MSDK对第三方SDK支持版本列表</a></li>
<li><a href="#当前msdk对第三方sdk支持广告类型">1.1.4 当前MSDK对第三方SDK支持广告类型</a></li>
</ul></li>
<li><a href="#androidmanifest配置">1.2 AndroidManifest配置</a>
<ul>
<li><a href="#添加权限">1.2.1 添加权限</a></li>
<li><a href="#适配anroid7.0及以上">1.2.2 适配Anroid7.0及以上</a></li>
<li><a href="#provider配置">1.2.3 provider配置</a></li>
<li><a href="#第三方落地页activity-声明">1.2.4 第三方落地页Activity 声明</a></li>
<li><a href="#运行环境配置">1.2.5 运行环境配置</a></li>
</ul></li>
<li><a href="#代码混淆">1.3 代码混淆</a></li>
<li><a href="#初始化sdk">1.4 初始化SDK</a>
<ul>
<li><a href="#初始化接口说明详见类ttadssdk">1.4.1 初始化接口说明(详见类:TTAdsSdk)</a></li>
<li><a href="#初始化配置参数说明">1.4.2 初始化配置参数说明：</a></li>
<li><a href="#穿山甲sdk配置针对穿山甲sdk初始化的特殊配置">1.4.3 穿山甲SDK配置（针对穿山甲SDK初始化的特殊配置）</a>
<ul>
<li><a href="#下载删除弹窗主题配置">1.4.3.1 下载删除弹窗主题配置</a></li>
<li><a href="#落地页titlebar主题以及其他配置">1.4.3.2 落地页titleBar主题以及其他配置</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#加载广告">2.加载广告</a>
<ul>
<li><a href="#加载广告之config配置相关">2.1 加载广告之Config配置相关</a></li>
<li><a href="#构建adslot对象">2.2 构建AdSlot对象</a></li>
<li><a href="#接入原生信息流广告ttnativead">2.4 接入原生信息流广告（TTNativeAd）</a>
<ul>
<li><a href="#ttnativead说明">2.4.1 TTNativeAd说明</a></li>
<li><a href="#加载原生信息流广告">2.4.2 加载原生信息流广告</a></li>
<li><a href="#原生信息流声音控制配置适用于全屏视频广告">2.4.3 原生信息流声音控制配置（适用于全屏视频广告）</a></li>
<li><a href="#展示信息流view">2.4.5 展示信息流View</a></li>
<li><a href="#展示原生信息流view以视频为例">2.4.5.1 展示原生信息流View(以视频为例)</a></li>
<li><a href="#展示模板信息流view以视频为例">2.4.5.2 展示模板信息流View(以视频为例)</a></li>
<li><a href="#广告view注册事件">2.4.5.3 广告view注册事件</a></li>
<li><a href="#原生信息流广告和模板信息流广告注册监听回调事件">2.4.5.4 原生信息流广告和模板信息流广告注册监听回调事件</a></li>
</ul></li>
<li><a href="#接入banner广告ttbannerad">2.5 接入Banner广告（TTBannerAd）</a>
<ul>
<li><a href="#ttbannerview广告类说明">2.5.1 TTBannerView广告类说明</a></li>
<li><a href="#加载banner广告">2.5.2 加载Banner广告</a></li>
<li><a href="#设置ttadbannerlistener-广告交互监听器">2.5.3 设置TTAdBannerListener 广告交互监听器</a></li>
</ul></li>
<li><a href="#接入开屏广告ttsplashad">2.6 接入开屏广告（TTSplashAd）</a>
<ul>
<li><a href="#ttsplashad广告类说明">2.6.1 TTSplashAd广告类说明：</a></li>
<li><a href="#加载开屏广告">2.6.2 加载开屏广告</a></li>
<li><a href="#设置开屏广告交互监听">2.6.3 设置开屏广告交互监听</a></li>
</ul></li>
<li><a href="#接入插屏广告ttinterstitialad">2.7 接入插屏广告（TTInterstitialAd）</a>
<ul>
<li><a href="#ttinterstitialad接口说明">2.7.1 TTInterstitialAd接口说明：</a></li>
<li><a href="#加载插屏广告">2.7.2 加载插屏广告</a></li>
<li><a href="#展示插屏广告">2.7.3 展示插屏广告</a></li>
</ul></li>
<li><a href="#接入激励视频广告ttrewardvideoad">2.8 接入激励视频广告（TTRewardVideoAd）</a>
<ul>
<li><a href="#ttrewardad类说明">2.8.1 TTRewardAd类说明：</a></li>
<li><a href="#加载激励视频广告">2.8.2 加载激励视频广告</a></li>
<li><a href="#展示激励视频广告">2.8.3 展示激励视频广告</a></li>
<li><a href="#设置激励视频交互回调">2.8.4 设置激励视频交互回调</a></li>
<li><a href="#服务器到服务器回调">2.8.5 服务器到服务器回调</a>
<ul>
<li><a href="#回调方式说明针对穿山甲sdk">回调方式说明(针对穿山甲SDK)</a></li>
<li><a href="#签名生成方式">签名生成方式</a></li>
<li><a href="#返回约定">返回约定</a></li>
</ul></li>
</ul></li>
<li><a href="#接入全屏视频广告ttfullscreenvideoad">2.9 接入全屏视频广告（TTFullScreenVideoAd）</a>
<ul>
<li><a href="#ttfullvideoad类说明">2.9.1 TTFullVideoAd类说明：</a></li>
<li><a href="#加载全屏视频广告">2.9.2 加载全屏视频广告</a></li>
<li><a href="#展示全屏视频广告">2.9.3 展示全屏视频广告</a></li>
<li><a href="#设置全屏视频交互回调">2.9.4 设置全屏视频交互回调</a></li>
</ul></li>
<li><a href="#接入dislike逻辑针对穿山甲sdk单独处理的逻辑">3.0 接入Dislike逻辑（针对穿山甲SDK单独处理的逻辑）</a>
<ul>
<li><a href="#信息流广告接入dislike">3.1 信息流广告接入Dislike</a>
<ul>
<li><a href="#原生信息流广告的dislike的设置">3.1.1 原生信息流广告的Dislike的设置</a></li>
<li><a href="#模板信息流广告的dislike的设置">3.1.2 模板信息流广告的Dislike的设置</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#参考">4.参考</a>
<ul>
<li><a href="#sdk错误码">4.1 SDK错误码</a></li>
<li><a href="#常见问题">4.2 常见问题</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="android-mobrain-sdk接入说明文档">Android Mobrain SDK——接入说明文档</h1>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>文档版本</th>
<th>修订日期</th>
<th>修订说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>v1.0.0.0</td>
<td>2020-04-23</td>
<td>创建文档，支持Banner，信息流广告，插屏广告，全屏视频广告，激励视频广告，支持Mintegral Admob Pangle GDT</td>
</tr>
<tr class="even">
<td>v2.0.0.0</td>
<td>2020-07-02</td>
<td>支持百度SDK、UnitySDK , 已知问题优化</td>
</tr>
<tr class="odd">
<td>v2.0.0.1</td>
<td>2020-08-19</td>
<td>内部版本</td>
</tr>
<tr class="even">
<td>v2.0.0.2</td>
<td>2020-08-20</td>
<td>新增Unity close回调函数处理，优化pangle banner展示</td>
</tr>
<tr class="odd">
<td>v2.1.0.0</td>
<td>2020-07-02</td>
<td>支持第三方广告SDK测试功能</td>
</tr>
<tr class="even">
<td>v2.2.0.0</td>
<td>2020-09-10</td>
<td>支持Pangle 普通激励和全屏视频广告；广告位由CodeId更名为AdUnitId；优化弱网环境播放</td>
</tr>
<tr class="odd">
<td>v2.2.0.1</td>
<td>2020-09-27</td>
<td>修复GDT splash 已知bug，优化文档demo说明</td>
</tr>
<tr class="even">
<td>v2.3.0.0</td>
<td>2020-10-16</td>
<td>支持快手SDK、SigmobSDK ,已知问题优化优化, 文档demo说明</td>
</tr>
</tbody>
</table>
<p>@[toc]</p>
<h2 id="sdk接入">1.SDK接入</h2>
<h3 id="sdk包的导入">1.1SDK包的导入</h3>
<h4 id="申请应用的codeid">1.1.1申请应用的CodeId</h4>
<p>请在Mobrain平台上创建好应用ID和广告位ID。</p>
<h4 id="导入aar及sdk依赖的jar包">1.1.2 导入aar及SDK依赖的jar包</h4>
<p>以下代码添加到您app的build.gradle中：</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>repositories {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    flatDir {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>        dirs &#39;libs&#39;</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>    }</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>}</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>depedencies {</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>     <span class="co">//mediation_ad_sdk adapter</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;admob_adapter&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;gdt_adapter&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;unity_adapter&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;baiduMobAds_adapter&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;ks_adapter&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;sigmob_adapter&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a>    <span class="co">//mediation_ad_sdk</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;mediation_ad_sdk&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a>    <span class="co">//Baidu</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;Baidu_MobAds_SDK_v5<span class="fl">.85</span>&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a>    <span class="co">//unity</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;unity-ads-android-<span class="fl">3.4.</span><span class="dv">2</span>&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a>    <span class="co">//pangle</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;open_ad_sdk_v2<span class="fl">.9.5.8</span>&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a>    </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a>    <span class="co">//GDT</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;GDTSDK.<span class="fu">unionNormal</span><span class="fl">.4.174.1044</span>&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a>    </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a>    <span class="co">//admob</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true"></a>    implementation &#39;com.<span class="fu">google</span>.<span class="fu">android</span>.<span class="fu">gms</span>:play-services-ads:<span class="fl">17.2.</span><span class="dv">0</span>&#39;</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true"></a>    </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true"></a>    <span class="co">//ks 快手</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;ks_adsdk-<span class="fl">2.6.</span><span class="dv">7</span>&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true"></a>    <span class="co">//sigmob</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true"></a>    <span class="fu">implementation</span>(name: &#39;windAd-<span class="fl">2.21.</span><span class="dv">0</span>&#39;, ext: &#39;aar&#39;)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true"></a>}</span></code></pre></div>
<h4 id="当前msdk对第三方sdk支持版本列表">1.1.3 当前MSDK对第三方SDK支持版本列表</h4>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>SDK名称</th>
<th>SDK版本</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Pangle SDK</td>
<td>&gt;= open_ad_sdk_v3.3.0.0</td>
</tr>
<tr class="even">
<td>Admob SDK</td>
<td>&lt;= com.google.android.gms:play-services-ads:17.2.0(暂不支持Androidx版本)</td>
</tr>
<tr class="odd">
<td>GDT SDK</td>
<td>&gt;= GDTSDK.unionNormal.4.174.1044</td>
</tr>
<tr class="even">
<td>Unity SDK</td>
<td>&gt;= unity-ads-android-3.4.2</td>
</tr>
<tr class="odd">
<td>Baidu SDK</td>
<td>&gt;= Baidu_MobAds_SDK_v5.85</td>
</tr>
<tr class="even">
<td>KS SDK</td>
<td>&gt;= ks_adsdk-2.6.7</td>
</tr>
<tr class="odd">
<td>Sigmob SDK</td>
<td>&gt;= windAd-2.21.0</td>
</tr>
</tbody>
</table>
<h4 id="当前msdk对第三方sdk支持广告类型">1.1.4 当前MSDK对第三方SDK支持广告类型</h4>
<table>
<thead>
<tr class="header">
<th>SDK名称</th>
<th>信息流/原生广告</th>
<th>Banner广告</th>
<th>插屏广告</th>
<th>开屏广告</th>
<th>激励视频</th>
<th>全屏视频</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Pangle SDK</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
</tr>
<tr class="even">
<td>Admob SDK</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
<td>不支持</td>
<td>☑️</td>
<td>☑️</td>
</tr>
<tr class="odd">
<td>GDT SDK</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
</tr>
<tr class="even">
<td>Unity SDK</td>
<td>不支持</td>
<td>☑️</td>
<td>不支持</td>
<td>不支持</td>
<td>☑️</td>
<td>☑️</td>
</tr>
<tr class="odd">
<td>Baidu SDK</td>
<td>☑️</td>
<td>☑️</td>
<td>☑️</td>
<td>不支持</td>
<td>☑️</td>
<td>☑️</td>
</tr>
<tr class="even">
<td>KS SDK</td>
<td>☑️</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
<td>☑️</td>
<td>☑️</td>
</tr>
<tr class="odd">
<td>Sigmob SDK</td>
<td>不支持️</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
<td>☑️</td>
<td>☑️</td>
</tr>
</tbody>
</table>
<h3 id="androidmanifest配置">1.2 AndroidManifest配置</h3>
<h4 id="添加权限">1.2.1 添加权限</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co">&lt;!--必要权限--&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.INTERNET&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a><span class="co">&lt;!--可选权限--&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.READ_PHONE_STATE&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.REQUEST_INSTALL_PACKAGES&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.GET_TASKS&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.CHANGE_WIFI_STATE&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a><span class="co">&lt;!--可选，Mobrain SDK提供“获取地理位置权限”和“不给予地理位置权限，开发者传入地理位置参数”两种方式上报用户位置，两种方式均可不选，添加位置权限或参数将帮助投放定位广告--&gt;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a><span class="co">&lt;!--请注意：无论通过何种方式提供给穿山甲用户地理位置，均需向用户声明地理位置权限将应用于穿山甲广告投放，穿山甲不强制获取地理位置信息--&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true"></a><span class="co">&lt;!-- 如果有视频相关的广告且使用textureView播放，请务必添加，否则黑屏 --&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true"></a><span class="kw">&lt;uses-permission</span><span class="ot"> android:name=</span><span class="st">&quot;android.permission.WAKE_LOCK&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<p><strong>注意</strong>: Mobrain SDK不强制获取以上权限，即使没有获取可选权限SDK也能正常运行；获取以上权限将帮助穿山甲优化投放广告精准度和用户的交互体验，提高eCPM。</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="co">//建议在广告请求前，合适的时机调用SDK提供的方法（申请权限）</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="co">//TTAdsSdk接口中的方法，context可以是Activity或Application</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>（app中没有）void <span class="fu">requestPermissionIfNecessary</span>(<span class="bu">Context</span> context);</span></code></pre></div>
<h4 id="适配anroid7.0及以上">1.2.2 适配Anroid7.0及以上</h4>
<p>如果您的应用需要在Anroid7.0及以上环境运行，请在AndroidManifest中添加如下代码：</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="co">&lt;!-- Panle  SDK TTFileProvider --&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="kw">&lt;provider</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a><span class="ot">    android:name=</span><span class="st">&quot;com.bytedance.sdk.openadsdk.TTFileProvider&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a><span class="ot">    android:authorities=</span><span class="st">&quot;${applicationId}.TTFileProvider&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a><span class="ot">    android:exported=</span><span class="st">&quot;false&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a><span class="ot">    android:grantUriPermissions=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>   <span class="kw">&lt;meta-data</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a><span class="ot">        android:name=</span><span class="st">&quot;android.support.FILE_PROVIDER_PATHS&quot;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a><span class="ot">        android:resource=</span><span class="st">&quot;@xml/file_paths&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a><span class="kw">&lt;/provider&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a><span class="co">&lt;!-- GDT targetSDKVersion &gt;= 24时才需要添加这个provider。provider的authorities属性的值为${applicationId}.fileprovider，请开发者根据自己的${applicationId}来设置这个值，例如本例中applicationId为&quot;com.qq.e.union.demo&quot;。 --&gt;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a><span class="kw">&lt;provider</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a><span class="ot">    android:name=</span><span class="st">&quot;android.support.v4.content.FileProvider&quot;</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a><span class="ot">    android:authorities=</span><span class="st">&quot;${applicationId}.fileprovider&quot;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a><span class="ot">    android:exported=</span><span class="st">&quot;false&quot;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a><span class="ot">    android:grantUriPermissions=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a>    <span class="kw">&lt;meta-data</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a><span class="ot">        android:name=</span><span class="st">&quot;android.support.FILE_PROVIDER_PATHS&quot;</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true"></a><span class="ot">        android:resource=</span><span class="st">&quot;@xml/gdt_file_path&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true"></a> <span class="kw">&lt;/provider&gt;</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true"></a> </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true"></a> <span class="co">&lt;!-- baidu --&gt;</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true"></a> <span class="kw">&lt;provider</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true"></a><span class="ot">             android:name=</span><span class="st">&quot;com.baidu.mobads.openad.BdFileProvider&quot;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true"></a><span class="ot">             android:authorities=</span><span class="st">&quot;${applicationId}.bd.provider&quot;</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true"></a><span class="ot">             android:exported=</span><span class="st">&quot;false&quot;</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true"></a><span class="ot">             android:grantUriPermissions=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true"></a>             <span class="kw">&lt;meta-data</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true"></a><span class="ot">                 android:name=</span><span class="st">&quot;android.support.FILE_PROVIDER_PATHS&quot;</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true"></a><span class="ot">                 android:resource=</span><span class="st">&quot;@xml/bd_file_paths&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true"></a>         <span class="kw">&lt;/provider&gt;</span></span></code></pre></div>
<p>在res/xml目录下，新建如下四个xml文件 pangle_file_paths.xml，在该文件中添加如下代码：</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;utf-8&quot;<span class="kw">?&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="kw">&lt;paths</span><span class="ot"> xmlns:android=</span><span class="st">&quot;http://schemas.android.com/apk/res/android&quot;</span><span class="kw">&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>   <span class="co">&lt;!--为了适配所有路径可以设置 path = &quot;.&quot; --&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>   <span class="kw">&lt;external-path</span><span class="ot"> name=</span><span class="st">&quot;tt_external_root&quot;</span><span class="ot"> path=</span><span class="st">&quot;.&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a>   <span class="kw">&lt;external-path</span><span class="ot"> name=</span><span class="st">&quot;tt_external_download&quot;</span><span class="ot"> path=</span><span class="st">&quot;Download&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a>   <span class="kw">&lt;external-files-path</span><span class="ot"> name=</span><span class="st">&quot;tt_external_files_download&quot;</span><span class="ot"> path=</span><span class="st">&quot;Download&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a>   <span class="kw">&lt;files-path</span><span class="ot"> name=</span><span class="st">&quot;tt_internal_file_download&quot;</span><span class="ot"> path=</span><span class="st">&quot;Download&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true"></a>   <span class="kw">&lt;cache-path</span><span class="ot"> name=</span><span class="st">&quot;tt_internal_cache_download&quot;</span><span class="ot"> path=</span><span class="st">&quot;Download&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true"></a><span class="kw">&lt;/paths&gt;</span></span></code></pre></div>
<p>gdt_file_path.xml</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="kw">&lt;paths&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a>    <span class="co">&lt;!-- 这个下载路径也不可以修改，必须为com_qq_e_download --&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>    <span class="kw">&lt;external-cache-path</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a><span class="ot">        name=</span><span class="st">&quot;gdt_sdk_download_path1&quot;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a><span class="ot">        path=</span><span class="st">&quot;com_qq_e_download&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a>    <span class="kw">&lt;cache-path</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a><span class="ot">        name=</span><span class="st">&quot;gdt_sdk_download_path2&quot;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true"></a><span class="ot">        path=</span><span class="st">&quot;com_qq_e_download&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true"></a><span class="kw">&lt;/paths&gt;</span></span></code></pre></div>
<p>bd_file_paths.xml</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;utf-8&quot;<span class="kw">?&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="kw">&lt;paths</span><span class="ot"> xmlns:android=</span><span class="st">&quot;http://schemas.android.com/apk/res/android&quot;</span><span class="kw">&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a>     <span class="kw">&lt;external-files-path</span><span class="ot"> name=</span><span class="st">&quot;bdpath&quot;</span><span class="ot"> path=</span><span class="st">&quot;bddownload/&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a>     <span class="kw">&lt;external-path</span><span class="ot"> name=</span><span class="st">&quot;bdpathsd&quot;</span><span class="ot"> path=</span><span class="st">&quot;bddownload/&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a><span class="kw">&lt;/paths&gt;</span></span></code></pre></div>
<p>sigmob_provider_paths.xml</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="kw">&lt;paths&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a>    <span class="co">&lt;!-- 这个下载路径不可以修改，SigDownload --&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a>    <span class="kw">&lt;external-cache-path</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a><span class="ot">        name=</span><span class="st">&quot;SigMob_root&quot;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a><span class="ot">        path=</span><span class="st">&quot;SigDownload&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a>    <span class="kw">&lt;external-path</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a><span class="ot">        name=</span><span class="st">&quot;SigMob_root_external&quot;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a><span class="ot">        path=</span><span class="st">&quot;.&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true"></a>    <span class="kw">&lt;root-path</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true"></a><span class="ot">        name=</span><span class="st">&quot;SigMob_root&quot;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true"></a><span class="ot">        path=</span><span class="st">&quot;.&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true"></a><span class="kw">&lt;/paths&gt;</span></span></code></pre></div>
<p>为了适配下载和安装相关功能，在工程中引用的包 <code>com.android.support:support-v4:24.2.0</code> 使用24.2.0以及以上版本。</p>
<h4 id="provider配置">1.2.3 provider配置</h4>
<p><strong>注意</strong>：必须配置该Provider</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="kw">&lt;provider</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="ot">    android:name=</span><span class="st">&quot;com.bytedance.sdk.openadsdk.multipro.TTMultiProvider&quot;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a><span class="ot">    android:authorities=</span><span class="st">&quot;${applicationId}.TTMultiProvider&quot;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a><span class="ot">    android:exported=</span><span class="st">&quot;false&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<p>admob 广告的provider配置以及APPLICATION_ID配置，APPLICATION_ID需要到Admob后台申请</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a>    <span class="kw">&lt;provider</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a><span class="ot">        android:name=</span><span class="st">&quot;com.google.android.gms.ads.MobileAdsInitProvider&quot;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a><span class="ot">        android:authorities=</span><span class="st">&quot;${applicationId}.mobileadsinitprovider&quot;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a><span class="ot">        tools:replace=</span><span class="st">&quot;android:authorities&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a>    </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a>    <span class="co">&lt;!-- Sample AdMob App ID: ca-app-pub-3940256099942544~3347511713 --&gt;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a>    <span class="kw">&lt;meta-data</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true"></a><span class="ot">        android:name=</span><span class="st">&quot;com.google.android.gms.ads.APPLICATION_ID&quot;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true"></a><span class="ot">        android:value=</span><span class="st">&quot;ca-app-pub-3940256099942544~3347511713&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true"></a>        <span class="co">&lt;!--This meta-data tag is required to use Google Play Services.--&gt;</span></span></code></pre></div>
<p>sigmob</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a>    <span class="kw">&lt;provider</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a><span class="ot">            android:name=</span><span class="st">&quot;com.sigmob.sdk.SigmobFileProvider&quot;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true"></a><span class="ot">            android:authorities=</span><span class="st">&quot;${applicationId}.sigprovider&quot;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true"></a><span class="ot">            android:exported=</span><span class="st">&quot;false&quot;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true"></a><span class="ot">            android:grantUriPermissions=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true"></a>            <span class="kw">&lt;meta-data</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true"></a><span class="ot">                android:name=</span><span class="st">&quot;android.support.FILE_PROVIDER_PATHS&quot;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true"></a><span class="ot">                android:resource=</span><span class="st">&quot;@xml/sigmob_provider_paths&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true"></a>        <span class="kw">&lt;/provider&gt;</span></span></code></pre></div>
<h4 id="第三方落地页activity-声明">1.2.4 第三方落地页Activity 声明</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>        <span class="co">&lt;!-- GDT start================== --&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a>      </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a>        <span class="kw">&lt;activity</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true"></a><span class="ot">            android:name=</span><span class="st">&quot;com.qq.e.ads.PortraitADActivity&quot;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true"></a><span class="ot">            android:configChanges=</span><span class="st">&quot;keyboard|keyboardHidden|orientation|screenSize&quot;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true"></a><span class="ot">            android:screenOrientation=</span><span class="st">&quot;portrait&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true"></a>        <span class="kw">&lt;activity</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true"></a><span class="ot">            android:name=</span><span class="st">&quot;com.qq.e.ads.LandscapeADActivity&quot;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true"></a><span class="ot">            android:configChanges=</span><span class="st">&quot;keyboard|keyboardHidden|orientation|screenSize&quot;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true"></a><span class="ot">            android:screenOrientation=</span><span class="st">&quot;landscape&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true"></a>        <span class="co">&lt;!-- 声明SDK所需要的组件 --&gt;</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true"></a>        <span class="kw">&lt;service</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true"></a><span class="ot">            android:name=</span><span class="st">&quot;com.qq.e.comm.DownloadService&quot;</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true"></a><span class="ot">            android:exported=</span><span class="st">&quot;false&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true"></a>        <span class="co">&lt;!-- 请开发者注意字母的大小写，ADActivity，而不是AdActivity --&gt;</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true"></a>        <span class="kw">&lt;activity</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true"></a><span class="ot">            android:name=</span><span class="st">&quot;com.qq.e.ads.ADActivity&quot;</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true"></a><span class="ot">            android:configChanges=</span><span class="st">&quot;keyboard|keyboardHidden|orientation|screenSize&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true"></a>        <span class="co">&lt;!-- GDT end================== --&gt;</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true"></a>    </span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true"></a>        <span class="co">&lt;!-- baidu start================== --&gt;</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true"></a>        <span class="kw">&lt;activity</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true"></a><span class="ot">            android:name=</span><span class="st">&quot;com.baidu.mobads.AppActivity&quot;</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true"></a><span class="ot">            android:configChanges=</span><span class="st">&quot;keyboard|keyboardHidden|orientation&quot;</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true"></a><span class="ot">            android:theme=</span><span class="st">&quot;@android:style/Theme.Translucent.NoTitleBar&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true"></a>        <span class="co">&lt;!-- baidu end================== --&gt;</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true"></a>        </span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true"></a>        <span class="co">&lt;!-- sigmob end================== --&gt;</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true"></a>        <span class="kw">&lt;activity</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true"></a><span class="ot">            android:name=</span><span class="st">&quot;com.sigmob.sdk.base.common.AdActivity&quot;</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true"></a><span class="ot">            android:configChanges=</span><span class="st">&quot;keyboardHidden|orientation|screenSize&quot;</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true"></a><span class="ot">            android:theme=</span><span class="st">&quot;@android:style/Theme.DeviceDefault&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true"></a>        <span class="co">&lt;!-- sigmob end================== --&gt;</span></span></code></pre></div>
<h4 id="运行环境配置">1.2.5 运行环境配置</h4>
<p>本SDK可运行于Android4.0 (API Level 14) 及以上版本。</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="kw">&lt;uses-sdk</span><span class="ot"> android:minSdkVersion=</span><span class="st">&quot;14&quot;</span><span class="ot"> android:targetSdkVersion=</span><span class="st">&quot;29&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<p>如果开发者声明targetSdkVersion到API 23以上，请确保调用本SDK的任何接口前，已经申请到了SDK要求的所有权限，否则SDK部分特性可能受限。</p>
<h3 id="代码混淆">1.3 代码混淆</h3>
<p>如果您需要使用proguard混淆代码，需确保不要混淆SDK的代码。 请在proguard.cfg文件(或其他混淆文件)尾部添加如下配置:</p>
<pre><code>#pangle
-keep class com.bytedance.sdk.openadsdk.** { *; }
-keep public interface com.bytedance.sdk.openadsdk.downloadnew.** {*;}
-keep class com.pgl.sys.ces.* {*;}

//聚合混淆
-keep class com.bytedance.msdk.adapter.**{ public *; }
-keep class com.bytedance.msdk.api.** {
 public *;
}
-keep class com.bytedance.msdk.base.TTBaseAd{*;}
-keep class com.bytedance.msdk.adapter.TTAbsAdLoaderAdapter{
    public *;
    protected &lt;fields&gt;;
}

# baidu sdk 不接入baidu sdk可以不引入
-keepclassmembers enum * {
public static **[] values();
public static ** valueOf(java.lang.String);
}

-keep class com.baidu.mobads.** { *; }
-keep class com.baidu.mobad.** { *; }
-keep class com.bun.miitmdid.core.** {*;}

#ks 快手 不接入ks sdk可以不引入
-keep class com.kwad.sdk.** { *;}
-keep class com.ksad.download.** { *;}
-keep class com.kwai.filedownloader.** { *;}


#sigmob  不接入sigmob sdk可以不引入
-dontwarn android.support.v4.**
-keep class android.support.v4.** { *; }
-keep interface android.support.v4.** { *; }
-keep public class * extends android.support.v4.**

-keep class sun.misc.Unsafe { *; }
-dontwarn com.sigmob.**
-keep class com.sigmob.**.**{*;}


</code></pre>
<p><strong>注意</strong>: SDK代码被混淆后会导致广告无法展现或者其它异常。</p>
<p><strong>注意</strong>: SDK中使用的so文件支持五种架构：x86,x86_64,armeabi,armeabi-v7a,arm64-v8a 如果您应用中支持的架构超出这 五种，请在build.gradle中使用abiFilters选择支持的架构。如下所示： ndk { // 设置支持的 SO 库构架，注意这里要根据你的实际情况来设置 abiFilters ‘armeabi-v7a’, ‘arm64-v8a’, ‘x86’, ‘x86_64’, ‘armeabi’ } packagingOptions { doNotStrip “<em>/armeabi-v7a/</em>.so” doNotStrip “<em>/x86/</em>.so” doNotStrip “<em>/arm64-v8a/</em>.so” doNotStrip “<em>/x86_64/</em>.so” doNotStrip “armeabi.so” }</p>
<h3 id="初始化sdk">1.4 初始化SDK</h3>
<p><strong>开发者需要在Application#onCreate()方法中调用以下代码来初始化adMediationsdk。</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a><span class="kw">public</span> <span class="kw">class</span> App <span class="kw">extends</span> Application {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a>    <span class="at">@Override</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCreate</span>() {</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a>        <span class="kw">super</span>.<span class="fu">onCreate</span>();</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a>        TTAdManagerHolder.<span class="fu">init</span>(<span class="kw">this</span>);  </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true"></a>    }</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true"></a>}</span></code></pre></div>
<h4 id="初始化接口说明详见类ttadssdk">1.4.1 初始化接口说明(详见类:TTAdsSdk)</h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a>     <span class="co">*</span> sdk初始化入口</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param context </span>必须是application context</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true"></a>     <span class="co">*</span> <span class="an">@param config </span> 初始化配置信息，必要参数</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">initialize</span>(<span class="bu">Context</span> context, TTAdConfig config)</span></code></pre></div>
<h4 id="初始化配置参数说明">1.4.2 初始化配置参数说明：</h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> TTAdConfig{</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a>        <span class="kw">private</span> <span class="bu">String</span> mAppId;<span class="co">// 必选参数，设置应用的AppId</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true"></a>        <span class="kw">private</span> <span class="bu">String</span> mAppName;<span class="co">// 必选参数，设置应用名称</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">boolean</span> mIsDebug = <span class="kw">false</span>;<span class="co">// 可选参数，是否打开debug调试信息输出：true打开、false关闭。默认false关闭</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true"></a>    }</span></code></pre></div>
<h4 id="穿山甲sdk配置针对穿山甲sdk初始化的特殊配置">1.4.3 穿山甲SDK配置（针对穿山甲SDK初始化的特殊配置）</h4>
<p>本SDK支持用户自定义下载删除弹窗、非Wifi下载提示弹窗的主题和落地页titleBar的主题。</p>
<h5 id="下载删除弹窗主题配置">1.4.3.1 下载删除弹窗主题配置</h5>
<p>用户可在styles.xml里覆盖下载删除弹窗、非Wifi下载提示弹窗的主题 (可选：可以不进行配置)。</p>
<pre><code>&lt;!—配置下载删除弹窗的主题 默认为Theme.DeviceDefault.Light.Dialog&quot; —&gt;
&lt;style name=&quot;Theme.Dialog.TTDownload&quot; parent=&quot;Theme.AppCompat.Light.Dialog&quot;&gt;
        &lt;item name=&quot;windowNoTitle&quot;&gt;android:attr/windowNoTitle&lt;/item&gt;
        &lt;item name=&quot;android:windowBackground&quot;&gt;@color/white&lt;/item&gt;
&lt;/style&gt;</code></pre>
<h5 id="落地页titlebar主题以及其他配置">1.4.3.2 落地页titleBar主题以及其他配置</h5>
<p>通过TTAdConfig可设置落地页的主题，目前支持落地页无titleBar（TITLE_BAR_THEME_NO_TITLE_BAR）、titleBar亮色主题(TTAdConstant.TITLE_BAR_THEME_LIGHT)，titleBar暗色主题(TTAdConstant.TITLE_BAR_THEME_DARK)三种。</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="kw">private</span> <span class="dt">static</span> TTAdConfig <span class="fu">buildConfig</span>() {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a>        <span class="kw">return</span> <span class="kw">new</span> TTAdConfig.<span class="fu">Builder</span>()</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a>                .<span class="fu">appId</span>(<span class="st">&quot;5001121&quot;</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a>                .<span class="fu">appName</span>(<span class="st">&quot;APP测试媒体&quot;</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true"></a>                .<span class="fu">isPanglePaid</span>(<span class="kw">false</span>)<span class="co">//是否为计费用户(穿山甲SDK相关配置)</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true"></a>                .<span class="fu">openDebugLog</span>(<span class="kw">true</span>) <span class="co">//测试阶段打开，可以通过日志排查问题，上线时去除该调用</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true"></a>                .<span class="fu">usePangleTextureView</span>(<span class="kw">true</span>) <span class="co">//使用TextureView控件播放视频,默认为SurfaceView,当有SurfaceView冲突的场景，可以使用TextureView</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true"></a>                .<span class="fu">setPangleTitleBarTheme</span>(TTAdConstant.<span class="fu">TITLE_BAR_THEME_DARK</span>) <span class="co">//(穿山甲SDK相关配置)</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true"></a>                .<span class="fu">allowPangleShowNotify</span>(<span class="kw">true</span>) <span class="co">//是否允许sdk展示通知栏提示  (穿山甲SDK相关配置)</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true"></a>                .<span class="fu">allowPangleShowPageWhenScreenLock</span>(<span class="kw">true</span>) <span class="co">//是否在锁屏场景支持展示广告落地页  (穿山甲SDK相关配置)</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true"></a>                .<span class="fu">setPangleDirectDownloadNetworkType</span>(TTAdConstant.<span class="fu">NETWORK_STATE_WIFI</span>, TTAdConstant.<span class="fu">NETWORK_STATE_3G</span>) <span class="co">//允许直接下载的网络状态集合  (穿山甲SDK相关配置)</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true"></a>                .<span class="fu">needPangleClearTaskReset</span>()<span class="co">//特殊机型过滤，部分机型出现包解析失败问题（大部分是三星）。参数取android.os.Build.MODEL   (穿山甲SDK相关配置)</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true"></a>                .<span class="fu">build</span>();</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true"></a>    }</span></code></pre></div>
<h2 id="加载广告">2.加载广告</h2>
<h3 id="加载广告之config配置相关">2.1 加载广告之Config配置相关</h3>
<p><strong>注：“原生信息流广告”，“Banner广告”，“插屏广告”，“全屏视频广告”，“激励视频广告”（除了开屏广告），需要再config配置下发之后才能进行广告加载</strong></p>
<p>config配置相关方法 相关方法在TTAdsSdk类中</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a>     <span class="co">/**</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a>     <span class="co">*</span> 注册config回调 ，当config拉取成功执行回调</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param configCallback</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">registerConfigCallback</span>(SettingConfigCallback configCallback) {</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true"></a>        </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true"></a>    }</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true"></a>     <span class="co">*</span> 判断当前是否存在config配置信息</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">boolean</span> <span class="fu">configLoadSuccess</span>() {</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true"></a>        </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true"></a>    }</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true"></a></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true"></a>     <span class="co">*</span> 移除config回调</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param configCallback</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">unregisterConfigCallback</span>(SettingConfigCallback configCallback) {</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true"></a>        </span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true"></a>    }</span></code></pre></div>
<p>开发者加载广告时使用方法如下：</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a>   <span class="co">/**</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a>     <span class="co">*</span> config回调</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true"></a>    <span class="kw">private</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span> mSettingConfigCallback = <span class="kw">new</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span>() {</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">configLoad</span>() {</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 在config 回调中加载广告&quot;</span>);</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true"></a>            <span class="fu">loadAd</span>(); <span class="co">//执行广告加载</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true"></a>        }</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true"></a>    };</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadAdWithCallback</span>() {</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true"></a>         <span class="co">*</span> 判断当前是否存在config 配置 ，如果存在直接加载广告 ，如果不存在则注册config加载回调</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true"></a>        <span class="kw">if</span> (TTAdsSdk.<span class="fu">configLoadSuccess</span>()) {</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置存在，直接加载广告&quot;</span>);</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true"></a>            <span class="fu">loadAd</span>();</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true"></a>        } <span class="kw">else</span> {</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置不存在，正在请求config配置....&quot;</span>);</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true"></a>            TTAdsSdk.<span class="fu">registerConfigCallback</span>(mSettingConfigCallback); <span class="co">//不能使用内部类，否则在ondestory中无法移除该回调</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true"></a>        }</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true"></a>    }</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true"></a>    </span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true"></a>     <span class="at">@Override</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true"></a>        <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true"></a>        <span class="co">//注销config回调</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true"></a>        TTAdsSdk.<span class="fu">unregisterConfigCallback</span>(mSettingConfigCallback);</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true"></a>    }</span></code></pre></div>
<h3 id="构建adslot对象">2.2 构建AdSlot对象</h3>
<p>AdSlot对象为加载广告时需要设置的广告信息，在加载各种广告时使用。</p>
<p>构建方法：</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a>AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true"></a>    <span class="co">// 必选参数 设置广告图片的最大尺寸及期望的图片宽高比，单位Px</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true"></a>    <span class="co">// 注：必填字段，期望的图片尺寸，返回尺寸可能有差异（模板广告需要设置期望个性化模板广告的大小,单位px,代码位是否属于个性化模板广告）</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true"></a>    .<span class="fu">setImageAdSize</span>(<span class="dv">640</span>, <span class="dv">320</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true"></a>    <span class="co">// 可选参数 设置是否支持deeplink</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true"></a>    .<span class="fu">setSupportDeepLink</span>(<span class="kw">true</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true"></a>    <span class="co">// 可选参数，针对信息流广告设置每次请求的广告返回个数，最多支持3个</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true"></a>    .<span class="fu">setAdCount</span>(<span class="dv">2</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true"></a>    <span class="co">//激励视频奖励的名称，针对激励视频参数</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true"></a>    .<span class="fu">setRewardName</span>(<span class="st">&quot;金币&quot;</span>)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true"></a>    <span class="co">//激励视频奖励个数</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true"></a>    .<span class="fu">setRewardAmount</span>(<span class="dv">3</span>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true"></a>    <span class="co">//用户ID,使用激励视频必传参数</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true"></a>    <span class="co">//表来标识应用侧唯一用户；若非服务器回调模式或不需sdk透传，可设置为空字符串</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true"></a>    .<span class="fu">setUserID</span>(<span class="st">&quot;user123&quot;</span>)</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true"></a>    <span class="co">//设置期望视频播放的方向，为TTAdConstant.HORIZONTAL或TTAdConstant.VERTICAL</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true"></a>    .<span class="fu">setOrientation</span>(orientation)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true"></a>    .<span class="fu">build</span>();</span></code></pre></div>
<h3 id="接入原生信息流广告ttnativead">2.4 接入原生信息流广告（TTNativeAd）</h3>
<p>SDK为接入方提供了可自定义布局的信息流广告，包含大图、小图、组图和视频以及模板等五种基本样式类型（具体的布局摆放可自行定义），及电话拨打、应用下载、跳转到落地页、跳转到浏览器四种交互类型。下面是SDK信息对象TTNativeAd的具体字段说明</p>
<h4 id="ttnativead说明">2.4.1 TTNativeAd说明</h4>
<p>下面对TTNativeAd类进行详细说明</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a><span class="kw">public</span> <span class="kw">interface</span> TTNativeAd {</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true"></a>     <span class="co">*</span> 广告标题</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true"></a>    <span class="bu">String</span> <span class="fu">getTitle</span>();</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true"></a>     <span class="co">*</span> 广告内容描述</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true"></a>    <span class="bu">String</span> <span class="fu">getDescription</span>();</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true"></a>     <span class="co">*</span> 广告Icon</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true"></a>    <span class="bu">String</span> <span class="fu">getIconUrl</span>();</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true"></a></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true"></a>     <span class="co">*</span> 大图URL</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true"></a>    <span class="bu">String</span> <span class="fu">getImageUrl</span>();</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true"></a></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true"></a></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true"></a>     <span class="co">*</span> 大图的宽</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true"></a>    <span class="dt">int</span> <span class="fu">getImageWidth</span>();</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true"></a></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true"></a>     <span class="co">*</span> 大图的高</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true"></a>    <span class="dt">int</span> <span class="fu">getImageHeight</span>();</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true"></a></span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true"></a></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true"></a>     <span class="co">*</span> 广告按钮文案</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true"></a>    <span class="bu">String</span> <span class="fu">getActionText</span>();</span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true"></a></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true"></a>     <span class="co">*</span> 下载类型广告包名</span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true"></a>    <span class="bu">String</span> <span class="fu">getPackageName</span>();</span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true"></a></span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true"></a>     <span class="co">*</span> 获取原生view</span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true"></a>    <span class="bu">View</span> <span class="fu">getExpressView</span>();</span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true"></a></span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true"></a></span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true"></a>     <span class="co">*</span> 广告的下载apk对应的星级</span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true"></a>    <span class="dt">double</span> <span class="fu">getStarRating</span>();</span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true"></a></span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true"></a>     <span class="co">*</span> 广告图片</span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true"></a>    <span class="bu">List</span>&lt;<span class="bu">String</span>&gt; <span class="fu">getImageList</span>();</span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true"></a></span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true"></a></span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true"></a>     <span class="co">*</span> 广告来源，一般是广告主名称</span>
<span id="cb23-84"><a href="#cb23-84" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-85"><a href="#cb23-85" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-86"><a href="#cb23-86" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-87"><a href="#cb23-87" aria-hidden="true"></a>    <span class="bu">String</span> <span class="fu">getSource</span>();</span>
<span id="cb23-88"><a href="#cb23-88" aria-hidden="true"></a></span>
<span id="cb23-89"><a href="#cb23-89" aria-hidden="true"></a></span>
<span id="cb23-90"><a href="#cb23-90" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-91"><a href="#cb23-91" aria-hidden="true"></a>     <span class="co">*</span> 设置在原生模板广告中使用网盟中dislike</span>
<span id="cb23-92"><a href="#cb23-92" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-93"><a href="#cb23-93" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param activity </span>       创建dislike的context</span>
<span id="cb23-94"><a href="#cb23-94" aria-hidden="true"></a>     <span class="co">*</span> <span class="an">@param dislikeCallback </span>dislike选择结果回调</span>
<span id="cb23-95"><a href="#cb23-95" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-96"><a href="#cb23-96" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">setDislikeCallback</span>(Activity activity, TTDislikeCallback dislikeCallback);</span>
<span id="cb23-97"><a href="#cb23-97" aria-hidden="true"></a></span>
<span id="cb23-98"><a href="#cb23-98" aria-hidden="true"></a></span>
<span id="cb23-99"><a href="#cb23-99" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-100"><a href="#cb23-100" aria-hidden="true"></a>     <span class="co">*</span> 得到dislike dialog 穿山甲SDK使用 原生广告</span>
<span id="cb23-101"><a href="#cb23-101" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-102"><a href="#cb23-102" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param activity </span>建议传当前activity，否则可能会影响dislike对话框弹出</span>
<span id="cb23-103"><a href="#cb23-103" aria-hidden="true"></a>     <span class="co">*</span> <span class="co">@</span>return</span>
<span id="cb23-104"><a href="#cb23-104" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-105"><a href="#cb23-105" aria-hidden="true"></a>    TTAdDislike <span class="fu">getDislikeDialog</span>(Activity activity);</span>
<span id="cb23-106"><a href="#cb23-106" aria-hidden="true"></a></span>
<span id="cb23-107"><a href="#cb23-107" aria-hidden="true"></a></span>
<span id="cb23-108"><a href="#cb23-108" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-109"><a href="#cb23-109" aria-hidden="true"></a>     <span class="co">*</span> 注册点击回调</span>
<span id="cb23-110"><a href="#cb23-110" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-111"><a href="#cb23-111" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param nativeAdListener</span></span>
<span id="cb23-112"><a href="#cb23-112" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-113"><a href="#cb23-113" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">setTTNativeAdListener</span>(TTNativeAdListener nativeAdListener);</span>
<span id="cb23-114"><a href="#cb23-114" aria-hidden="true"></a></span>
<span id="cb23-115"><a href="#cb23-115" aria-hidden="true"></a></span>
<span id="cb23-116"><a href="#cb23-116" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-117"><a href="#cb23-117" aria-hidden="true"></a>     <span class="co">*</span> 注册视频回调事件</span>
<span id="cb23-118"><a href="#cb23-118" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-119"><a href="#cb23-119" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param videoListener</span></span>
<span id="cb23-120"><a href="#cb23-120" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-121"><a href="#cb23-121" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">setTTVideoListener</span>(TTVideoListener videoListener);</span>
<span id="cb23-122"><a href="#cb23-122" aria-hidden="true"></a></span>
<span id="cb23-123"><a href="#cb23-123" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-124"><a href="#cb23-124" aria-hidden="true"></a>     <span class="co">*</span> 注册事件，计费点</span>
<span id="cb23-125"><a href="#cb23-125" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-126"><a href="#cb23-126" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param container</span></span>
<span id="cb23-127"><a href="#cb23-127" aria-hidden="true"></a>     <span class="co">*</span> <span class="an">@param clickViews</span></span>
<span id="cb23-128"><a href="#cb23-128" aria-hidden="true"></a>     <span class="co">*</span> <span class="an">@param creativeViews</span></span>
<span id="cb23-129"><a href="#cb23-129" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-130"><a href="#cb23-130" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">registerView</span>(<span class="at">@NonNull</span> ViewGroup container, <span class="at">@NonNull</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; clickViews, <span class="at">@Nullable</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; creativeViews, TTViewBinder viewBinder);</span>
<span id="cb23-131"><a href="#cb23-131" aria-hidden="true"></a></span>
<span id="cb23-132"><a href="#cb23-132" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-133"><a href="#cb23-133" aria-hidden="true"></a>     <span class="co">*</span> 解注册</span>
<span id="cb23-134"><a href="#cb23-134" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-135"><a href="#cb23-135" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">unregisterView</span>();</span>
<span id="cb23-136"><a href="#cb23-136" aria-hidden="true"></a></span>
<span id="cb23-137"><a href="#cb23-137" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-138"><a href="#cb23-138" aria-hidden="true"></a>     <span class="co">*</span> 动态布局渲染时调用的接口，原生广告该接口无效</span>
<span id="cb23-139"><a href="#cb23-139" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-140"><a href="#cb23-140" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">render</span>();</span>
<span id="cb23-141"><a href="#cb23-141" aria-hidden="true"></a></span>
<span id="cb23-142"><a href="#cb23-142" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-143"><a href="#cb23-143" aria-hidden="true"></a>     <span class="co">*</span> 广告展示类型<span class="co">,</span>大图，小图，组图，视频</span>
<span id="cb23-144"><a href="#cb23-144" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-145"><a href="#cb23-145" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-146"><a href="#cb23-146" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-147"><a href="#cb23-147" aria-hidden="true"></a>    <span class="dt">int</span> <span class="fu">getAdImageMode</span>();</span>
<span id="cb23-148"><a href="#cb23-148" aria-hidden="true"></a></span>
<span id="cb23-149"><a href="#cb23-149" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-150"><a href="#cb23-150" aria-hidden="true"></a>     <span class="co">*</span> 广告交互类型</span>
<span id="cb23-151"><a href="#cb23-151" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-152"><a href="#cb23-152" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-153"><a href="#cb23-153" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-154"><a href="#cb23-154" aria-hidden="true"></a>    <span class="dt">int</span> <span class="fu">getInteractionType</span>();</span>
<span id="cb23-155"><a href="#cb23-155" aria-hidden="true"></a></span>
<span id="cb23-156"><a href="#cb23-156" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-157"><a href="#cb23-157" aria-hidden="true"></a>     <span class="co">*</span> 用于判断当前广告是否为模板广告</span>
<span id="cb23-158"><a href="#cb23-158" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-159"><a href="#cb23-159" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-160"><a href="#cb23-160" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-161"><a href="#cb23-161" aria-hidden="true"></a>    <span class="dt">boolean</span> <span class="fu">isExpressAd</span>();</span>
<span id="cb23-162"><a href="#cb23-162" aria-hidden="true"></a></span>
<span id="cb23-163"><a href="#cb23-163" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-164"><a href="#cb23-164" aria-hidden="true"></a>     <span class="co">*</span> 是否需要dislike 按钮</span>
<span id="cb23-165"><a href="#cb23-165" aria-hidden="true"></a>     <span class="co">*</span></span>
<span id="cb23-166"><a href="#cb23-166" aria-hidden="true"></a>     <span class="co">* @</span>return</span>
<span id="cb23-167"><a href="#cb23-167" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-168"><a href="#cb23-168" aria-hidden="true"></a>    <span class="dt">boolean</span> <span class="fu">hasDislike</span>();</span>
<span id="cb23-169"><a href="#cb23-169" aria-hidden="true"></a></span>
<span id="cb23-170"><a href="#cb23-170" aria-hidden="true"></a></span>
<span id="cb23-171"><a href="#cb23-171" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-172"><a href="#cb23-172" aria-hidden="true"></a>     <span class="co">*</span> 暂停</span>
<span id="cb23-173"><a href="#cb23-173" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-174"><a href="#cb23-174" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onPause</span>();</span>
<span id="cb23-175"><a href="#cb23-175" aria-hidden="true"></a></span>
<span id="cb23-176"><a href="#cb23-176" aria-hidden="true"></a></span>
<span id="cb23-177"><a href="#cb23-177" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-178"><a href="#cb23-178" aria-hidden="true"></a>     <span class="co">*</span> onResume</span>
<span id="cb23-179"><a href="#cb23-179" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-180"><a href="#cb23-180" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">resume</span>();</span>
<span id="cb23-181"><a href="#cb23-181" aria-hidden="true"></a></span>
<span id="cb23-182"><a href="#cb23-182" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb23-183"><a href="#cb23-183" aria-hidden="true"></a>     <span class="co">*</span> 释放资源</span>
<span id="cb23-184"><a href="#cb23-184" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb23-185"><a href="#cb23-185" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">destroy</span>();</span>
<span id="cb23-186"><a href="#cb23-186" aria-hidden="true"></a>}</span></code></pre></div>
<h4 id="加载原生信息流广告">2.4.2 加载原生信息流广告</h4>
<p>加载信息流广告需要通过TTUnifiedNativeAd类来实现 接入方可调用TTUnifiedNativeAd.loadAd(AdSlot adSlot, TTNativeAdLoadCallback callback)方法异步加载信息流广告，adSlot为用户请求的信息，callback为加载成功、失败的回调监听器。示例如下：</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>函数名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TTUnifiedNativeAd(Context context, String adUnitId)</td>
<td>创建TTUnifiedNativeAd，其中context传Activity ,adUnitId 为广告位Id，需要从平台申请</td>
</tr>
<tr class="even">
<td>loadAd(AdSlot adSlot, TTNativeAdLoadCallback callback)</td>
<td>调用该方法加载信息流广告，adSlot 请求的配置信息，TTNativeAdLoadCallback 信息流加载成功失败的回调函数</td>
</tr>
<tr class="odd">
<td>destroy()</td>
<td>销毁资源的函数，建议在界面（Activity）销毁时调用</td>
</tr>
</tbody>
</table>
<p>简单代码示例如下(详见demo FeedListActivity)</p>
<p><strong>注：每次加载信息流广告的时候需要新建一个TTUnifiedNativeAd，否则可能会出现广告填充问题（ 例如：mTTAdNative = new TTUnifiedNativeAd(this, mAdUnitId);）</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true"></a>    <span class="co">//step1:创建TTUnifiedNativeAd对象，传递Context对象和广告位ID即mAdUnitId</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true"></a>    TTUnifiedNativeAd  mTTAdNative;</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true"></a>    <span class="co">//....省略其他代码  具体详见demo</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true"></a>    </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true"></a>    </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true"></a>     <span class="co">/**</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true"></a>     <span class="co">*</span> config回调</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true"></a>    <span class="kw">private</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span> mSettingConfigCallback = <span class="kw">new</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span>() {</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">configLoad</span>() {</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 在config 回调中加载广告&quot;</span>);</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true"></a>            <span class="fu">loadListAd</span>();</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true"></a>        }</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true"></a>    };</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true"></a>     <span class="co">*</span> 加载feed广告</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadListAdWithCallback</span>() {</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true"></a>         <span class="co">*</span> 判断当前是否存在config 配置 ，如果存在直接加载广告 ，如果不存在则注册config加载回调</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true"></a>        <span class="kw">if</span> (TTAdsSdk.<span class="fu">configLoadSuccess</span>()) {</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置存在，直接加载广告&quot;</span>);</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true"></a>            <span class="fu">loadListAd</span>();</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true"></a>        } <span class="kw">else</span> {</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置不存在，正在请求config配置....&quot;</span>);</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true"></a>            TTAdsSdk.<span class="fu">registerConfigCallback</span>(mSettingConfigCallback); <span class="co">//不能使用内部类，否则在ondestory中无法移除该回调</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true"></a>        }</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true"></a>    }</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true"></a>    </span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true"></a>    </span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true"></a>     <span class="co">*</span> 加载feed广告</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadListAd</span>() {</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true"></a></span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true"></a>        mTTAdNative = <span class="kw">new</span> <span class="fu">TTUnifiedNativeAd</span>(<span class="kw">this</span>, mAdUnitId);</span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true"></a>        <span class="co">//step2:创建feed广告请求类型参数AdSlot,具体参数含义参考文档</span></span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true"></a>        AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true"></a>                .<span class="fu">setSupportDeepLink</span>(<span class="kw">true</span>)</span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true"></a>                .<span class="fu">setImageAdSize</span>(<span class="dv">640</span>, <span class="dv">320</span>)<span class="co">//注：必填字段，期望的图片尺寸，返回尺寸可能有差异</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true"></a>                .<span class="fu">setAdCount</span>(<span class="dv">3</span>) <span class="co">//请求广告数量为1到3条</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true"></a>                .<span class="fu">build</span>();</span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true"></a>        <span class="co">//step3:请求广告，调用feed广告异步请求接口，加载到广告后，拿到广告素材自定义渲染</span></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true"></a>        mTTAdNative.<span class="fu">loadAd</span>(adSlot, <span class="kw">new</span> <span class="fu">TTNativeAdLoadCallback</span>() {</span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdLoaded</span>(<span class="bu">List</span>&lt;TTNativeAd&gt; ads) {</span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true"></a>                <span class="kw">if</span> (ads == <span class="kw">null</span> || ads.<span class="fu">isEmpty</span>()) {</span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true"></a>                    TToast.<span class="fu">show</span>(FeedListActivity.<span class="fu">this</span>, <span class="st">&quot;on FeedAdLoaded: ad is null!&quot;</span>);</span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true"></a>                    <span class="kw">return</span>;</span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true"></a>                }</span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true"></a>                <span class="co">//广告加载成功 ads</span></span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true"></a>            }</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true"></a></span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdLoadedFial</span>(AdError adError) {</span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true"></a>                <span class="co">//广告加载失败</span></span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true"></a>            }</span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true"></a>        });</span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true"></a>        </span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true"></a>    <span class="at">@Override</span></span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true"></a>        <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true"></a>        <span class="co">//注销config回调</span></span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true"></a>        TTAdsSdk.<span class="fu">unregisterConfigCallback</span>(mSettingConfigCallback);</span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true"></a>        </span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true"></a>        <span class="kw">if</span> (mAds != <span class="kw">null</span>) {</span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true"></a>            <span class="kw">for</span> (TTNativeAd ad : mAds) {</span>
<span id="cb24-72"><a href="#cb24-72" aria-hidden="true"></a>                ad.<span class="fu">destroy</span>();</span>
<span id="cb24-73"><a href="#cb24-73" aria-hidden="true"></a>            }</span>
<span id="cb24-74"><a href="#cb24-74" aria-hidden="true"></a>        }</span>
<span id="cb24-75"><a href="#cb24-75" aria-hidden="true"></a>        mAds = <span class="kw">null</span>;</span>
<span id="cb24-76"><a href="#cb24-76" aria-hidden="true"></a>    }</span>
<span id="cb24-77"><a href="#cb24-77" aria-hidden="true"></a>        </span>
<span id="cb24-78"><a href="#cb24-78" aria-hidden="true"></a>        </span>
<span id="cb24-79"><a href="#cb24-79" aria-hidden="true"></a>        </span>
<span id="cb24-80"><a href="#cb24-80" aria-hidden="true"></a>        </span></code></pre></div>
<h4 id="原生信息流声音控制配置适用于全屏视频广告">2.4.3 原生信息流声音控制配置（适用于全屏视频广告）</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a>        <span class="co">//针对广点通的信息流声音单独配置</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true"></a>        GDTExtraOption gdtExtraOption = <span class="kw">new</span> GDTExtraOption.<span class="fu">Builder</span>()</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true"></a>                .<span class="fu">setGDTAutoPlayMuted</span>(<span class="kw">true</span>)<span class="co">//自动播放是否静音，默认true</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true"></a>                .<span class="fu">setGDTDetailPageMuted</span>(<span class="kw">true</span>)<span class="co">//详情页是否静音，默认值为false，即有声播放；</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true"></a>                .<span class="fu">setGDTEnableDetailPage</span>(<span class="kw">true</span>)<span class="co">//是否能跳转详情页，默认true</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true"></a>                .<span class="fu">setGDTEnableUserControl</span>(<span class="kw">false</span>)<span class="co">//是否能控制是否暂停与播放，默认false</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true"></a>                .<span class="fu">setGDTMaxVideoDuration</span>(<span class="dv">15</span>)<span class="co">//视频最大长度，单位:秒 此设置会影响广告填充，请谨慎设置</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true"></a>                .<span class="fu">setGDTMinVideoDuration</span>(<span class="dv">5</span>)<span class="co">//视频最小长度，单位:秒 此设置会影响广告填充，请谨慎设置</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true"></a>                <span class="co">// VideoOption.AutoPlayPolicy.WIFI表示只在WiFi下自动播放；</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true"></a>                <span class="co">// VideoOption.AutoPlayPolicy.ALWAYS表示始终自动播放，不区分当前网络；</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true"></a>                <span class="co">// VideoOption.AutoPlayPolicy.NEVER表示始终都不自动播放，不区分当前网络，但在WiFi时会预下载视频资源；</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true"></a>                <span class="co">// 默认为始终自动播放；模板渲染视频、插屏视频、自渲染视频都可使用</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true"></a>                .<span class="fu">setAutoPlayPolicy</span>(GDTExtraOption.<span class="fu">AutoPlayPolicy</span>.<span class="fu">WIFI</span>)<span class="co">//自动播放策略--</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true"></a>                .<span class="fu">build</span>();</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true"></a>        <span class="co">//针对百度SDK信息流设置</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true"></a>        BaiduExtraOptions baiduExtraOptions = <span class="kw">new</span> BaiduExtraOptions.<span class="fu">Builder</span>()</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true"></a>                .<span class="fu">setGDTExtraOption</span>(BaiduExtraOptions.<span class="fu">DOWNLOAD_APP_CONFIRM_ALWAYS</span>)</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true"></a>                .<span class="fu">setCacheVideoOnlyWifi</span>(<span class="kw">true</span>).<span class="fu">build</span>();</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true"></a></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true"></a>        <span class="co">//视频声音控制</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true"></a>        TTVideoOption videoOption = <span class="kw">new</span> TTVideoOption.<span class="fu">Builder</span>()</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true"></a>                .<span class="fu">setMuted</span>(<span class="kw">true</span>) <span class="co">//所有类型生效，除GDT</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true"></a>                .<span class="fu">setAdmobAppVolume</span>(<span class="fl">0f</span>)<span class="co">//针对admob声音配置，与setMuted配合使用，范围[0-1]</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true"></a>                .<span class="fu">setGDTExtraOption</span>(gdtExtraOption)<span class="co">//GDT单独配置</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true"></a>                .<span class="fu">setBaiduExtraOption</span>(baiduExtraOptions)<span class="co">//百度SDK配置</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true"></a>                .<span class="fu">build</span>();</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true"></a></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true"></a>        <span class="co">//创建feed广告请求类型参数AdSlot,具体参数含义参考文档</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true"></a>        AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true"></a>                .<span class="fu">setTTVideoOption</span>(videoOption)<span class="co">//视频声音相关的配置</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true"></a>                .<span class="fu">setAdStyleType</span>(mAdStyle)<span class="co">//必传，表示请求的模板广告还是原生广告</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true"></a>                .<span class="fu">setSupportDeepLink</span>(<span class="kw">true</span>)</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true"></a>                .<span class="fu">setImageAdSize</span>(<span class="dv">640</span>, <span class="dv">320</span>)</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true"></a>                .<span class="fu">setAdCount</span>(<span class="dv">3</span>) <span class="co">//请求广告数量为1到3条</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true"></a>                .<span class="fu">build</span>();</span></code></pre></div>
<p>信息流视频声音的配置需要通过TTVideoOption类来实现，其构建方法具体含义如下：</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="kw">class</span> Builder {</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">boolean</span> mMuted = <span class="kw">true</span>; <span class="co">//视频类是否静音</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">float</span> mAdmobAppVolume;<span class="co">//  admob 声音大小的设置 范围[0-1]</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true"></a>        <span class="kw">private</span> GDTExtraOption mGDTExtraOption; <span class="co">//广点通信息流和自渲染2.0 以及 插屏2.0 视频配置项</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true"></a>        <span class="kw">public</span> <span class="fu">Builder</span>() {</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true"></a>        }</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true"></a>        </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true"></a>         <span class="co">*</span> 广点通广告的自渲染<span class="co">2.0</span> 和 插屏<span class="co">2.0</span> 视频额外配置项</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true"></a>         <span class="co">* </span><span class="an">@param gdtExtraOption</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true"></a>        <span class="kw">public</span> Builder <span class="fu">setGDTExtraOption</span>(GDTExtraOption gdtExtraOption) {</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true"></a>            mGDTExtraOption = gdtExtraOption;</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true"></a>            <span class="kw">return</span> <span class="kw">this</span>;</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true"></a>        }</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true"></a>         <span class="co">*</span> Admob 声音大小设置,范围：[<span class="co">0-1]</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true"></a>         <span class="co">*</span> the volume as a float from <span class="co">0</span> <span class="co">(</span>muted<span class="co">)</span> to <span class="co">1</span> <span class="co">(</span>full media volume<span class="co">)</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true"></a>         <span class="co">* </span><span class="an">@param volume</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true"></a>        <span class="kw">public</span> Builder <span class="fu">setAdmobAppVolume</span>(<span class="dt">float</span> volume) {</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true"></a>            <span class="kw">if</span> (volume &gt; <span class="dv">1</span>) {</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true"></a>                volume = <span class="dv">1</span>;</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true"></a>            } <span class="kw">else</span> <span class="kw">if</span> (volume &lt; <span class="dv">0</span>) {</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true"></a>                volume = <span class="dv">0</span>;</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true"></a>            }</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true"></a>            <span class="kw">this</span>.<span class="fu">mAdmobAppVolume</span> = volume;</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true"></a>            <span class="kw">return</span> <span class="kw">this</span>;</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true"></a>        }</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true"></a></span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true"></a>         <span class="co">*</span> 设置视频类广告是否静音 ， true 静音 ， false 非静音</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true"></a>         <span class="co">* </span><span class="an">@param mMuted</span></span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true"></a>         <span class="co">*</span> <span class="co">@</span>return</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">final</span> Builder <span class="fu">setMuted</span>(<span class="dt">boolean</span> mMuted) {</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true"></a>            <span class="kw">this</span>.<span class="fu">mMuted</span> = mMuted;</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true"></a>            <span class="kw">return</span> <span class="kw">this</span>;</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true"></a>        }</span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true"></a></span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">final</span> TTVideoOption <span class="fu">build</span>() {</span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true"></a>            <span class="kw">return</span> <span class="kw">new</span> <span class="fu">TTVideoOption</span>(<span class="kw">this</span>);</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true"></a>        }</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true"></a>    }</span></code></pre></div>
<p>其中GDTExtraOption类为广点通GDT的个性配置，仅对广点通信息流广告生效，对于<code>setMuted(boolean mMuted)</code>方法，对除广点通外的信息流广告生效，其中穿山甲SDK需要在云端单独配置。 #### 2.4.3 原生信息流视频广告回调 如果需要额外的视频回调操作，如视频加载状态，暂停播放，续播等操作可以实现VideoAdListener接口（注意并非所有视频回调函数都会执行）</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true"></a><span class="co">//视频广告设置播放状态回调（可选）</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true"></a>    ad.<span class="fu">setTTVideoListener</span>(<span class="kw">new</span> <span class="fu">TTVideoListener</span>() {</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoStart</span>() {</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true"></a>            TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告视频开始播放&quot;</span>);</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true"></a>        }</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoPause</span>() {</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true"></a>            TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告视频暂停&quot;</span>);</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true"></a>        }</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoResume</span>() {</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true"></a>            TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告视频继续播放&quot;</span>);</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true"></a>        }</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true"></a></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoCompleted</span>() {</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true"></a>            TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告被点击&quot;</span>);</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true"></a>        }</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true"></a></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoError</span>(AdError adError) {</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true"></a>            TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告视频播放出错&quot;</span>);</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true"></a>        }</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true"></a>    });</span></code></pre></div>
<h4 id="展示信息流view">2.4.5 展示信息流View</h4>
<p>目前Mobrain SDK 包含原生信息流和模板信息流两大类,这是两种不同类型的广告展示方式,需要分别处理,以下是原生广告和模板广告的处理方式,详见demo中的FeedListActivity类</p>
<h4 id="展示原生信息流view以视频为例">2.4.5.1 展示原生信息流View(以视频为例)</h4>
<p>布局文件：</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true"></a><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;utf-8&quot;<span class="kw">?&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true"></a><span class="co">&lt;!-- 必须使用SDK提供的TTNativeAdView布局作为广告的父View ，否则将会影响广告点击计费 --&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true"></a><span class="kw">&lt;com.bytedance.sdk.api.format.TTNativeAdView</span><span class="ot"> xmlns:android=</span><span class="st">&quot;http://schemas.android.com/apk/res/android&quot;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true"></a><span class="ot">    xmlns:tools=</span><span class="st">&quot;http://schemas.android.com/tools&quot;</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true"></a><span class="ot">    android:layout_width=</span><span class="st">&quot;match_parent&quot;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true"></a><span class="ot">    android:layout_height=</span><span class="st">&quot;wrap_content&quot;</span><span class="kw">&gt;</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true"></a>    <span class="kw">&lt;RelativeLayout</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true"></a><span class="ot">        android:layout_width=</span><span class="st">&quot;match_parent&quot;</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true"></a><span class="ot">        android:layout_height=</span><span class="st">&quot;wrap_content&quot;</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true"></a><span class="ot">        tools:ignore=</span><span class="st">&quot;HardcodedText&quot;</span><span class="kw">&gt;</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true"></a>        <span class="kw">&lt;include</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true"></a><span class="ot">            android:id=</span><span class="st">&quot;@+id/icon_source_layout&quot;</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true"></a><span class="ot">            layout=</span><span class="st">&quot;@layout/listitem_ad_icon_source_layout&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true"></a>        <span class="kw">&lt;TextView</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true"></a><span class="ot">            android:id=</span><span class="st">&quot;@+id/tv_listitem_ad_desc&quot;</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true"></a><span class="ot">            android:layout_width=</span><span class="st">&quot;match_parent&quot;</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true"></a><span class="ot">            android:layout_height=</span><span class="st">&quot;wrap_content&quot;</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true"></a><span class="ot">            android:layout_below=</span><span class="st">&quot;@+id/icon_source_layout&quot;</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true"></a><span class="ot">            android:textSize=</span><span class="st">&quot;18sp&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true"></a>        <span class="co">&lt;!--使用SDK提供的视频容器布局--&gt;</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true"></a>        <span class="kw">&lt;com.bytedance.sdk.api.format.TTMediaView</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true"></a><span class="ot">            android:id=</span><span class="st">&quot;@+id/iv_listitem_video&quot;</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true"></a><span class="ot">            android:layout_width=</span><span class="st">&quot;match_parent&quot;</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true"></a><span class="ot">            android:layout_height=</span><span class="st">&quot;200dp&quot;</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true"></a><span class="ot">            android:layout_below=</span><span class="st">&quot;@id/tv_listitem_ad_desc&quot;</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true"></a><span class="ot">            android:layout_marginLeft=</span><span class="st">&quot;10dp&quot;</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true"></a><span class="ot">            android:layout_marginRight=</span><span class="st">&quot;10dp&quot;</span></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true"></a><span class="ot">            android:background=</span><span class="st">&quot;@android:color/background_dark&quot;</span></span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true"></a><span class="ot">            android:scaleType=</span><span class="st">&quot;centerCrop&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true"></a></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true"></a>        <span class="co">&lt;!-- title+creativeBtn layout --&gt;</span></span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true"></a>        <span class="kw">&lt;include</span></span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true"></a><span class="ot">            android:id=</span><span class="st">&quot;@+id/ad_title_creative_btn_layout&quot;</span></span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true"></a><span class="ot">            layout=</span><span class="st">&quot;@layout/listitem_ad_title_creative_btn_layout&quot;</span></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true"></a><span class="ot">            android:layout_width=</span><span class="st">&quot;match_parent&quot;</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true"></a><span class="ot">            android:layout_height=</span><span class="st">&quot;45dp&quot;</span></span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true"></a><span class="ot">            android:layout_below=</span><span class="st">&quot;@+id/iv_listitem_video&quot;</span></span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true"></a><span class="ot">            android:layout_marginLeft=</span><span class="st">&quot;10dp&quot;</span></span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true"></a><span class="ot">            android:layout_marginRight=</span><span class="st">&quot;10dp&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true"></a></span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true"></a>    <span class="kw">&lt;/RelativeLayout&gt;</span></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true"></a><span class="kw">&lt;/com.bytedance.sdk.api.format.TTNativeAdView&gt;</span></span></code></pre></div>
<p>上述布局文件有两点需要注意的，在展示广告View时，广告元素如title，下载button等相关的控件，它们的父类必须是SDK提供的 <code>com.bytedance.sdk.api.format.TTNativeAdView</code> 布局作为广告的父View ，否则将会影响广告点击计费事件。同时在展示视频类广告View时，视频类容器也需要使用SDK提供的 <code>com.bytedance.sdk.api.format.TTMediaView</code> , 否则可能会影响展示或者展示计费事件。下面演示通过代码来使用上述布局文件来展示信息流广告View</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true"></a> <span class="kw">private</span> <span class="bu">View</span> <span class="fu">getVideoView</span>(<span class="bu">View</span> convertView, ViewGroup parent, <span class="at">@NonNull</span> <span class="dt">final</span> TTNativeAd ad) {</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true"></a>            <span class="dt">final</span> VideoAdViewHolder adViewHolder;</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true"></a>            TTViewBinder viewBinder;</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true"></a>            <span class="kw">try</span> {</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true"></a>                <span class="kw">if</span> (convertView == <span class="kw">null</span>) {</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true"></a>                    convertView = LayoutInflater.<span class="fu">from</span>(mContext).<span class="fu">inflate</span>(R.<span class="fu">layout</span>.<span class="fu">listitem_ad_large_video</span>, parent, <span class="kw">false</span>);</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true"></a>                    adViewHolder = <span class="kw">new</span> <span class="fu">VideoAdViewHolder</span>();</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true"></a>                    adViewHolder.<span class="fu">mTitle</span> = (TextView) convertView.<span class="fu">findViewById</span>(R.<span class="fu">id</span>.<span class="fu">tv_listitem_ad_title</span>);</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true"></a>                    adViewHolder.<span class="fu">mDescription</span> = (TextView) convertView.<span class="fu">findViewById</span>(R.<span class="fu">id</span>.<span class="fu">tv_listitem_ad_desc</span>);</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true"></a>                    adViewHolder.<span class="fu">mSource</span> = (TextView) convertView.<span class="fu">findViewById</span>(R.<span class="fu">id</span>.<span class="fu">tv_listitem_ad_source</span>);</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true"></a>                    adViewHolder.<span class="fu">videoView</span> = (FrameLayout) convertView.<span class="fu">findViewById</span>(R.<span class="fu">id</span>.<span class="fu">iv_listitem_video</span>);</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true"></a>                    adViewHolder.<span class="fu">mIcon</span> = (<span class="bu">ImageView</span>) convertView.<span class="fu">findViewById</span>(R.<span class="fu">id</span>.<span class="fu">iv_listitem_icon</span>);</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true"></a>                    adViewHolder.<span class="fu">mDislike</span> = (<span class="bu">ImageView</span>) convertView.<span class="fu">findViewById</span>(R.<span class="fu">id</span>.<span class="fu">iv_listitem_dislike</span>);</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true"></a>                    adViewHolder.<span class="fu">mCreativeButton</span> = (<span class="bu">Button</span>) convertView.<span class="fu">findViewById</span>(R.<span class="fu">id</span>.<span class="fu">btn_listitem_creative</span>);</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true"></a>                    <span class="co">//TTViewBinder 是必须类,需要开发者在确定好View之后把Id设置给TTViewBinder类，并在注册事件时传递给SDK</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true"></a>                    viewBinder = <span class="kw">new</span> TTViewBinder.<span class="fu">Builder</span>(R.<span class="fu">layout</span>.<span class="fu">listitem_ad_large_video</span>).</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true"></a>                            <span class="fu">titleId</span>(R.<span class="fu">id</span>.<span class="fu">tv_listitem_ad_title</span>).</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true"></a>                            <span class="fu">sourceId</span>(R.<span class="fu">id</span>.<span class="fu">tv_listitem_ad_source</span>).</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true"></a>                            <span class="fu">decriptionTextId</span>(R.<span class="fu">id</span>.<span class="fu">tv_listitem_ad_desc</span>).</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true"></a>                            <span class="fu">mediaViewIdId</span>(R.<span class="fu">id</span>.<span class="fu">iv_listitem_video</span>).</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true"></a>                            <span class="fu">callToActionId</span>(R.<span class="fu">id</span>.<span class="fu">btn_listitem_creative</span>).</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true"></a>                            <span class="fu">iconImageId</span>(R.<span class="fu">id</span>.<span class="fu">iv_listitem_icon</span>).<span class="fu">build</span>();</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true"></a>                    adViewHolder.<span class="fu">viewBinder</span> = viewBinder;</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true"></a>                    convertView.<span class="fu">setTag</span>(adViewHolder);</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true"></a>                } <span class="kw">else</span> {</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true"></a>                    adViewHolder = (VideoAdViewHolder) convertView.<span class="fu">getTag</span>();</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true"></a>                    viewBinder = adViewHolder.<span class="fu">viewBinder</span>;</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true"></a>                }</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true"></a>                <span class="co">//绑定广告数据、设置交互回调，同时传递viewBinder对象</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true"></a>                <span class="fu">bindData</span>(convertView, adViewHolder, ad, viewBinder);</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true"></a>            } <span class="kw">catch</span> (<span class="bu">Exception</span> e) {</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true"></a>                e.<span class="fu">printStackTrace</span>();</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true"></a>            }</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true"></a></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true"></a>            <span class="kw">return</span> convertView;</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true"></a>        }</span></code></pre></div>
<p><strong>注意点：</strong> 在开发者自行确定好信息流View的布局及其控件ID后，需要将与广告元素相关的ID设置给SDK提供的TTViewBinder类，该类说明如下：</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true"></a><span class="kw">public</span> <span class="dt">final</span> <span class="dt">static</span> <span class="kw">class</span> Builder {</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true"></a>         <span class="co">*</span> 广告View的布局文件ID</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">final</span> <span class="dt">int</span> layoutId;</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true"></a>         <span class="co">*</span> 广告标题对应控件的ID</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">int</span> titleId;</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true"></a>         <span class="co">*</span> 广告描述对应控件的ID</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">int</span> decriptionTextId;</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true"></a>         <span class="co">*</span> 广告创意按钮<span class="co">(</span>如下载，查看详情等<span class="co">)</span>对应控件的ID</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">int</span> callToActionId;</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true"></a>         <span class="co">*</span> 广告Icon对应的控件ID</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">int</span> iconImageId;</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true"></a>         <span class="co">*</span> 广告大图对应控件的ID</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">int</span> mainImageId;</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true"></a>         <span class="co">*</span> 广告视频对于控件的ID<span class="co">(</span>视频类才需要传递<span class="co">)</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">int</span> mediaViewId;</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true"></a>         <span class="co">*</span> 广告来源对于控件的ID</span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true"></a>        <span class="kw">private</span> <span class="dt">int</span> sourceId;</span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true"></a>}</span></code></pre></div>
<h4 id="展示模板信息流view以视频为例">2.4.5.2 展示模板信息流View(以视频为例)</h4>
<p>模板广告的展示相对于原生信息流简单很多，布局文件如下：</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true"></a><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;utf-8&quot;<span class="kw">?&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true"></a><span class="kw">&lt;com.bytedance.sdk.api.format.TTNativeAdView</span><span class="ot"> xmlns:android=</span><span class="st">&quot;http://schemas.android.com/apk/res/android&quot;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true"></a><span class="ot">    xmlns:tools=</span><span class="st">&quot;http://schemas.android.com/tools&quot;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true"></a><span class="ot">    android:layout_width=</span><span class="st">&quot;match_parent&quot;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true"></a><span class="ot">    android:layout_height=</span><span class="st">&quot;wrap_content&quot;</span><span class="kw">&gt;</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true"></a>    <span class="kw">&lt;FrameLayout</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true"></a><span class="ot">        android:id=</span><span class="st">&quot;@+id/iv_listitem_express&quot;</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true"></a><span class="ot">        android:layout_width=</span><span class="st">&quot;match_parent&quot;</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true"></a><span class="ot">        android:layout_height=</span><span class="st">&quot;match_parent&quot;</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true"></a><span class="ot">        android:layout_gravity=</span><span class="st">&quot;center&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true"></a><span class="kw">&lt;/com.bytedance.sdk.api.format.TTNativeAdView&gt;</span></span></code></pre></div>
<p>同样需要注意的时广告view的父类仍然必须是 <code>com.bytedance.sdk.api.format.TTNativeAdView</code> ，下面演示了如果在代码中处理模板广告，更多详细代码请见FeedListActivity</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true"></a> <span class="co">//渲染模板广告</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true"></a><span class="at">@SuppressWarnings</span>(<span class="st">&quot;RedundantCast&quot;</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true"></a><span class="kw">private</span> <span class="bu">View</span> <span class="fu">getExpressAdView</span>(<span class="bu">View</span> convertView, ViewGroup parent, <span class="at">@NonNull</span> <span class="dt">final</span> TTNativeAd ad){</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true"></a>     <span class="dt">final</span> ExpressAdViewHolder adViewHolder;</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true"></a>     <span class="kw">try</span> {</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true"></a>         <span class="kw">if</span> (convertView == <span class="kw">null</span>) {</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true"></a>             convertView = LayoutInflater.<span class="fu">from</span>(mContext).<span class="fu">inflate</span>(R.<span class="fu">layout</span>.<span class="fu">listitem_ad_native_express</span>, parent, <span class="kw">false</span>);</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true"></a>             adViewHolder = <span class="kw">new</span> <span class="fu">ExpressAdViewHolder</span>();</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true"></a>             adViewHolder.<span class="fu">mAdContainerView</span> = (FrameLayout) convertView.<span class="fu">findViewById</span>(R.<span class="fu">id</span>.<span class="fu">iv_listitem_express</span>);</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true"></a>             convertView.<span class="fu">setTag</span>(adViewHolder);</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true"></a>         } <span class="kw">else</span> {</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true"></a>             adViewHolder = (ExpressAdViewHolder) convertView.<span class="fu">getTag</span>();</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true"></a>         }</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true"></a>         <span class="co">//判断是否存在dislike按钮</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true"></a>         <span class="kw">if</span> (ad.<span class="fu">hasDislike</span>()) {</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true"></a>             ad.<span class="fu">setDislikeCallback</span>((Activity) mContext, <span class="kw">new</span> <span class="fu">TTDislikeCallback</span>() {</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true"></a>                 <span class="at">@Override</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true"></a>                 <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSelected</span>(<span class="dt">int</span> position, <span class="bu">String</span> value) {</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true"></a>                     TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击 &quot;</span> + value);</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true"></a>                     <span class="co">//用户选择不喜欢原因后，移除广告展示</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true"></a>                     mData.<span class="fu">remove</span>(ad);</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true"></a>                     sumCount--;</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true"></a>                     <span class="fu">notifyDataSetChanged</span>();</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true"></a>                 }</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true"></a></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true"></a>                 <span class="at">@Override</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true"></a>                 <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCancel</span>() {</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true"></a>                     TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;dislike 点击了取消&quot;</span>);</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true"></a>                 }</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true"></a>             });</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true"></a>         }</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true"></a></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true"></a>         <span class="co">//设置点击展示回调监听</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true"></a>         ad.<span class="fu">setTTNativeAdListener</span>(<span class="kw">new</span> <span class="fu">TTNativeExpressAdListener</span>() {</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true"></a>             <span class="at">@Override</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true"></a>             <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdClick</span>() {</span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true"></a>                 TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;模板广告被点击&quot;</span>);</span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true"></a>             }</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true"></a></span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true"></a>             <span class="at">@Override</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true"></a>             <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdShow</span>() {</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true"></a>                 TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;模板广告show&quot;</span>);</span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true"></a>             }</span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true"></a></span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true"></a>             <span class="at">@Override</span></span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true"></a>             <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderFail</span>(<span class="bu">View</span> view, <span class="bu">String</span> msg, <span class="dt">int</span> code) {</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true"></a>                 TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;模板广告渲染失败code=&quot;</span> + code + <span class="st">&quot;,msg=&quot;</span> + msg);</span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true"></a>             }</span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true"></a></span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true"></a>             <span class="at">@Override</span></span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true"></a>             <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height) {</span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true"></a>                 TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;模板广告渲染成功:width=&quot;</span> + width + <span class="st">&quot;,height=&quot;</span> + height);</span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true"></a>                 <span class="co">//回调渲染成功后将模板布局添加的父View中</span></span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true"></a>                 <span class="kw">if</span> (adViewHolder.<span class="fu">mAdContainerView</span> != <span class="kw">null</span>) {</span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true"></a>                     <span class="co">//获取视频播放view,该view SDK内部渲染，在媒体平台可配置视频是否自动播放等设置。</span></span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true"></a>                     <span class="dt">int</span> sWidth;</span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true"></a>                     <span class="dt">int</span> sHeight;</span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true"></a>                     <span class="dt">final</span> <span class="bu">View</span> video = ad.<span class="fu">getExpressView</span>();</span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true"></a>                     <span class="co">//如果返回的size是TTAdSize.FULL_WIDTH和 height == TTAdSize.AUTO_HEIGHT</span></span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true"></a>                     <span class="co">//广告view的布局直接设置为如下值</span></span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true"></a>                     <span class="kw">if</span> (width == TTAdSize.<span class="fu">FULL_WIDTH</span> &amp;&amp; height == TTAdSize.<span class="fu">AUTO_HEIGHT</span>) {</span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true"></a>                         sWidth = FrameLayout.<span class="fu">LayoutParams</span>.<span class="fu">MATCH_PARENT</span>;</span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true"></a>                         sHeight = FrameLayout.<span class="fu">LayoutParams</span>.<span class="fu">WRAP_CONTENT</span>;</span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true"></a>                     } <span class="kw">else</span> {</span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true"></a>                         <span class="co">//传回来的值，开发者可自行调整View大小</span></span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true"></a>                         sWidth = UIUtils.<span class="fu">getScreenWidth</span>(mContext);</span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true"></a>                         sHeight = (<span class="dt">int</span>) ((sWidth * height) / width);</span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true"></a>                     }</span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true"></a>                     <span class="kw">if</span> (video != <span class="kw">null</span>) {</span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true"></a>                  </span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true"></a>                         <span class="kw">if</span> (video.<span class="fu">getParent</span>() == <span class="kw">null</span>) {</span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true"></a>                             FrameLayout.<span class="fu">LayoutParams</span> layoutParams = <span class="kw">new</span> FrameLayout.<span class="fu">LayoutParams</span>(sWidth, sHeight);</span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true"></a>                             adViewHolder.<span class="fu">mAdContainerView</span>.<span class="fu">removeAllViews</span>();</span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true"></a>                             adViewHolder.<span class="fu">mAdContainerView</span>.<span class="fu">addView</span>(video, layoutParams);</span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true"></a>                         }</span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true"></a>                     }</span>
<span id="cb32-78"><a href="#cb32-78" aria-hidden="true"></a>                 }</span>
<span id="cb32-79"><a href="#cb32-79" aria-hidden="true"></a>             }</span>
<span id="cb32-80"><a href="#cb32-80" aria-hidden="true"></a>         });</span>
<span id="cb32-81"><a href="#cb32-81" aria-hidden="true"></a>         <span class="co">//调用渲染模板布局的方法</span></span>
<span id="cb32-82"><a href="#cb32-82" aria-hidden="true"></a>         ad.<span class="fu">render</span>();</span>
<span id="cb32-83"><a href="#cb32-83" aria-hidden="true"></a>     } <span class="kw">catch</span> (<span class="bu">Exception</span> e) {</span>
<span id="cb32-84"><a href="#cb32-84" aria-hidden="true"></a>         e.<span class="fu">printStackTrace</span>();</span>
<span id="cb32-85"><a href="#cb32-85" aria-hidden="true"></a>     }</span>
<span id="cb32-86"><a href="#cb32-86" aria-hidden="true"></a></span>
<span id="cb32-87"><a href="#cb32-87" aria-hidden="true"></a>     <span class="kw">return</span> convertView;</span>
<span id="cb32-88"><a href="#cb32-88" aria-hidden="true"></a>     }</span></code></pre></div>
<p>在设置完监听事件后，需要调用render()方法对模板广告进行渲染，渲染成功会回调onRenderSuccess方法，渲染失败则会回调onRenderFail方法。</p>
<h4 id="广告view注册事件">2.4.5.3 广告view注册事件</h4>
<p>在加载到信息流广告后，接入方需要注册在信息流广告中可以点击的View，即TTNativeAd.registerViewForInteraction()方法，<strong>以实现广告的功能交互及计费</strong>。包含图文点击区域的注册和附加创意按钮点击区域的注册。对于落地页广告，用户点击图文广告区域会跳转到相应的落地页，点击附加创意区域会进行电话拨打、应用下载等操作，注意模板类信息流广告并不需要调用注册方法。 注册点击View示例的示例代码如下，该示例片段在FeedListActivity中调用。</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">bindData</span>(<span class="bu">View</span> convertView, <span class="dt">final</span> AdViewHolder adViewHolder, <span class="dt">final</span> TTNativeAd ad, TTViewBinder viewBinder) {</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true"></a>   <span class="co">//设置dislike弹窗，如果有</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true"></a>   <span class="kw">if</span> (ad.<span class="fu">hasDislike</span>()) {</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true"></a>       <span class="dt">final</span> TTAdDislike ttAdDislike = ad.<span class="fu">getDislikeDialog</span>((Activity) mContext);</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true"></a>       adViewHolder.<span class="fu">mDislike</span>.<span class="fu">setVisibility</span>(<span class="bu">View</span>.<span class="fu">VISIBLE</span>);</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true"></a>       adViewHolder.<span class="fu">mDislike</span>.<span class="fu">setOnClickListener</span>(<span class="kw">new</span> <span class="bu">View</span>.<span class="fu">OnClickListener</span>() {</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true"></a>           <span class="at">@Override</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true"></a>           <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onClick</span>(<span class="bu">View</span> v) {</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true"></a>               <span class="co">//使用接口来展示</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true"></a>               ttAdDislike.<span class="fu">showDislikeDialog</span>();</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true"></a>               ttAdDislike.<span class="fu">setDislikeCallback</span>(<span class="kw">new</span> <span class="fu">TTDislikeCallback</span>() {</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true"></a>                   <span class="at">@Override</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true"></a>                   <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSelected</span>(<span class="dt">int</span> position, <span class="bu">String</span> value) {</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true"></a>                       TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击 &quot;</span> + value);</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true"></a>                       <span class="co">//用户选择不喜欢原因后，移除广告展示</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true"></a>                       mData.<span class="fu">remove</span>(ad);</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true"></a>                       sumCount--;<span class="co">//总数也要减少</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true"></a>                       <span class="fu">notifyDataSetChanged</span>();</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true"></a>                   }</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true"></a>                   <span class="at">@Override</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true"></a>                   <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCancel</span>() {</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true"></a>                       TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;dislike 点击了取消&quot;</span>);</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true"></a>                   }</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true"></a>               });</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true"></a>           }</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true"></a>       });</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true"></a>   } <span class="kw">else</span> {</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true"></a>       <span class="kw">if</span> (adViewHolder.<span class="fu">mDislike</span> != <span class="kw">null</span>)</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true"></a>           adViewHolder.<span class="fu">mDislike</span>.<span class="fu">setVisibility</span>(<span class="bu">View</span>.<span class="fu">GONE</span>);</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true"></a>   }</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true"></a>   <span class="co">//设置事件回调</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true"></a>   ad.<span class="fu">setTTNativeAdListener</span>(mTTNativeAdListener);</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true"></a>   <span class="co">//可以被点击的view, 也可以把convertView放进来意味item可被点击</span></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true"></a>   <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; clickViewList = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;&gt;();</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true"></a>   clickViewList.<span class="fu">add</span>(convertView);</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true"></a>   clickViewList.<span class="fu">add</span>(adViewHolder.<span class="fu">mSource</span>);</span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true"></a>   clickViewList.<span class="fu">add</span>(adViewHolder.<span class="fu">mTitle</span>);</span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true"></a>   clickViewList.<span class="fu">add</span>(adViewHolder.<span class="fu">mDescription</span>);</span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true"></a>   clickViewList.<span class="fu">add</span>(adViewHolder.<span class="fu">mIcon</span>);</span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true"></a>   <span class="co">//触发创意广告的view（点击下载或拨打电话）</span></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true"></a>   <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; creativeViewList = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;&gt;();</span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true"></a>   creativeViewList.<span class="fu">add</span>(adViewHolder.<span class="fu">mCreativeButton</span>);</span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true"></a>   <span class="co">//重要! 这个涉及到广告计费，必须正确调用。convertView必须使用ViewGroup,必须传递viewBinder</span></span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true"></a>   ad.<span class="fu">registerView</span>((ViewGroup) convertView, clickViewList, creativeViewList, viewBinder);</span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true"></a>   <span class="co">//省略其他代码</span></span>
<span id="cb33-46"><a href="#cb33-46" aria-hidden="true"></a>}</span></code></pre></div>
<p>在原生信息类中必须需要调用registerView方法进行事件注册，否则将影响广告计费</p>
<h4 id="原生信息流广告和模板信息流广告注册监听回调事件">2.4.5.4 原生信息流广告和模板信息流广告注册监听回调事件</h4>
<p>原生信息流广告使用的监听回调接口是 <code>com.bytedance.sdk.api.nativeAd.TTNativeAdListener</code> 模板信息流广告注册监听回调接口是 <code>com.bytedance.sdk.api.nativeAd.TTNativeExpressAdListener</code> 他们的具体介绍如下：</p>
<p>TTNativeAdListener 如下：</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true"></a> <span class="kw">public</span> <span class="kw">interface</span>  TTNativeAdListener {</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true"></a>     <span class="co">*</span> 点击回调事件</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdClick</span>();</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true"></a>    </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true"></a>     <span class="co">*</span> 展示回调事件</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdShow</span>();</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true"></a>}</span></code></pre></div>
<p>TTNativeExpressAdListener 如下：</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true"></a><span class="kw">public</span> <span class="kw">interface</span> TTNativeExpressAdListener <span class="kw">extends</span> TTNativeAdListener {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true"></a>     <span class="co">/**</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true"></a>     <span class="co">*</span> 点击回调事件</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdClick</span>();</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true"></a>     <span class="co">*</span> 展示回调事件</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdShow</span>();</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true"></a>    </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true"></a>     <span class="co">*</span> 模板渲染失败</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param view</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onRenderFail</span>(<span class="bu">View</span> view, <span class="bu">String</span> msg, <span class="dt">int</span> code);</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true"></a></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true"></a>     <span class="co">*</span> 模板渲染成功</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true"></a>     <span class="co">* </span><span class="an">@param view</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true"></a>     <span class="co">*</span> <span class="an">@param width </span> 返回view的宽 ，开发者可以根据返回的宽高进行比例适配</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true"></a>     <span class="co">*</span> <span class="an">@param height </span>返回view的高 ，开发者可以根据返回的宽高进行比例适配</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height);</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="接入banner广告ttbannerad">2.5 接入Banner广告（TTBannerAd）</h3>
<p>SDK为接入方提供了Banner类型的广告，Banner广告为一张图片的View（TTBannerAd.getBannerView），此View的宽高默认为match_parent，用户可以自行定义宽高或通过设置父布局的宽高的方式来限定Banner广告的大小（注：Banner广告的宽高请尽量与adSlot中设置的宽高比例接近，以避免过多非等比例的拉伸）。</p>
<p>Banner广告可支持的多种尺寸比例，具体如下（com.bytedance.sdk.api.TTAdSize）：</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">int</span> BANNER_<span class="dv">320_50</span> = <span class="dv">1</span>;</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">int</span> BANNER_<span class="dv">320_100</span> = <span class="dv">2</span>;</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">int</span> BANNER_<span class="dv">300_250</span> = <span class="dv">3</span>;</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">int</span> BANNER_<span class="dv">468_60</span> = <span class="dv">4</span>; </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">int</span> BANNER_<span class="dv">728_90</span> = <span class="dv">5</span>;</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">int</span> BANNER_CUSTOME = <span class="dv">6</span>; <span class="co">//自定义大小</span></span></code></pre></div>
<h4 id="ttbannerview广告类说明">2.5.1 TTBannerView广告类说明</h4>
<p>请求banner广告需要通过TTBannerView类来实现，该类具体调用接口如下：</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TTBannerView(Context context, String adUnitId)</td>
<td>构造方法，传入上下文context，rit广告位ID，开发平台申请后填入</td>
</tr>
<tr class="even">
<td>loadAd(AdSlot adSlot, TTAdBannerLoadCallBack adBannerLoadCallBack)</td>
<td>加载广告，adSlot相关配置参数，adBannerLoadCallBack 加载回调监听</td>
</tr>
<tr class="odd">
<td>setTTAdBannerListener(TTAdBannerListener adBannerListener)</td>
<td>交互回调监听事件</td>
</tr>
<tr class="even">
<td>setRefreshTime(int refreshTime)</td>
<td>设置banner轮播刷新事件</td>
</tr>
<tr class="odd">
<td>View getBannerView()</td>
<td>获取banner 广告View</td>
</tr>
<tr class="even">
<td>destroy()</td>
<td>资源回收方法</td>
</tr>
</tbody>
</table>
<h4 id="加载banner广告">2.5.2 加载Banner广告</h4>
<p>接入方可通过调用TTBannerView.loadAd(AdSlot adSlot, TTAdBannerLoadCallBack adBannerLoadCallBack)方法来异步加载Banner广告，adSlot为请求的信息，TTAdBannerLoadCallBack为Banner广告加载成功、失败的回调，在UI线程回调，详细代码见demo中的BannerActivity</p>
<p><strong>注：每次加载banner的时候需要新建一个TTBannerView，否则可能会出现广告填充问题（ 例如：mTTBannerView = new TTBannerView(this, adUnitId);）</strong></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true"></a></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true"></a>     <span class="co">*</span> config回调</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true"></a>    <span class="kw">private</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span> mSettingConfigCallback = <span class="kw">new</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span>() {</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">configLoad</span>() {</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 在config 回调中加载广告&quot;</span>);</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true"></a>            <span class="fu">loadBannerAd</span>();</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true"></a>        }</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true"></a>    };</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true"></a>     <span class="co">*</span> 加载广告</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadAdWithCallback</span>() {</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true"></a>         <span class="co">*</span> 判断当前是否存在config 配置 ，如果存在直接加载广告 ，如果不存在则注册config加载回调</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true"></a>        <span class="kw">if</span> (TTAdsSdk.<span class="fu">configLoadSuccess</span>()) {</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置存在，直接加载广告&quot;</span>);</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true"></a>            <span class="fu">loadBannerAd</span>();</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true"></a>        } <span class="kw">else</span> {</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置不存在，正在请求config配置....&quot;</span>);</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true"></a>            TTAdsSdk.<span class="fu">registerConfigCallback</span>(mSettingConfigCallback); <span class="co">//不能使用内部类，否则在ondestory中无法移除该回调</span></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true"></a>        }</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true"></a>    }</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true"></a></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadBannerAd</span>(<span class="bu">String</span> adUnitId) {</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true"></a>        mTTBannerView = <span class="kw">new</span> <span class="fu">TTBannerView</span>(<span class="kw">this</span>, adUnitId);</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true"></a>        mTTBannerView.<span class="fu">setRefreshTime</span>(<span class="dv">30</span>);<span class="co">//设置轮播时间30S</span></span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true"></a>        mTTBannerView.<span class="fu">setAllowShowCloseBtn</span>(<span class="kw">true</span>);<span class="co">//如果广告本身允许展示关闭按钮，这里设置为true 就是展示</span></span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true"></a>        mTTBannerView.<span class="fu">setTTAdBannerListener</span>(ttAdBannerListener);</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true"></a>        <span class="co">//step4:创建广告请求参数AdSlot,具体参数含义参考文档</span></span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true"></a>        AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true"></a>                .<span class="fu">setSupportDeepLink</span>(<span class="kw">true</span>)</span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true"></a>                .<span class="fu">setBannerSize</span>(TTAdSize.<span class="fu">BANNER_320_50</span>)</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true"></a>                <span class="co">//.setBannerSize(300,600) 使用TTAdSize.BANNER_CUSTOME可以调用setAdSize设置大小</span></span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true"></a>                .<span class="fu">build</span>();</span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true"></a>        <span class="co">//step5:请求广告，对请求回调的广告作渲染处理</span></span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true"></a>        mTTBannerView.<span class="fu">loadAd</span>(adSlot, <span class="kw">new</span> <span class="fu">TTAdBannerLoadCallBack</span>() {</span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdFailedToLoad</span>(AdError adError) {</span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true"></a>                mBannerContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true"></a>            }</span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true"></a></span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdLoaded</span>() {</span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true"></a>                mBannerContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true"></a>                <span class="kw">if</span> (mTTBannerView != <span class="kw">null</span>) {</span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true"></a>                    <span class="co">//横幅广告容器的尺寸必须至少与横幅广告一样大。如果您的容器留有内边距，实际上将会减小容器大小。如果容器无法容纳横幅广告，则横幅广告不会展示</span></span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true"></a>                    <span class="bu">View</span> view = mTTBannerView.<span class="fu">getBannerView</span>();</span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true"></a>                    <span class="kw">if</span> (view != <span class="kw">null</span>)</span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true"></a>                        mBannerContainer.<span class="fu">addView</span>(view);</span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true"></a>                }</span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true"></a>            }</span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true"></a>        });</span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true"></a>    }</span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true"></a>    </span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true"></a>    </span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true"></a>    <span class="at">@Override</span></span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true"></a>        <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true"></a>        <span class="co">//注销config回调</span></span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true"></a>        TTAdsSdk.<span class="fu">unregisterConfigCallback</span>(mSettingConfigCallback);</span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true"></a>        <span class="kw">if</span> (mTTBannerView != <span class="kw">null</span>) {</span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true"></a>            mTTBannerView.<span class="fu">destroy</span>();</span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true"></a>        }</span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true"></a>    }</span></code></pre></div>
<h4 id="设置ttadbannerlistener-广告交互监听器">2.5.3 设置TTAdBannerListener 广告交互监听器</h4>
<p>mTTBannerView.setTTAdBannerListener(ttAdBannerListener);</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true"></a><span class="kw">public</span> <span class="kw">interface</span> TTAdBannerListener {</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true"></a>     <span class="co">*</span> 当广告打开浮层时调用，如打开内置浏览器、内容展示浮层，一般发生在点击之后</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true"></a>     <span class="co">*</span> 常常在onAdLeftApplication之前调用，不能保证每次都回调</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdOpened</span>();</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true"></a>     <span class="co">*</span> 此方法会在用户点击打开其他应用（例如 Google Play）时</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true"></a>     <span class="co">*</span> 于 onAdOpened<span class="co">()</span> 之后调用，从而在后台运行当前应用，不能保证每次都回调</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdLeftApplication</span>();</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true"></a></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true"></a>     <span class="co">*</span> 关闭广告</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdClosed</span>();</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true"></a></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true"></a>     <span class="co">*</span> 广告被点击，肯定有回调</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdClicked</span>();</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true"></a></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true"></a>     <span class="co">*</span> 广告展示，肯定有回调</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdShow</span>();</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true"></a>}</span></code></pre></div>
<p>具体示例详见Demo中的BannerActivity。</p>
<h3 id="接入开屏广告ttsplashad">2.6 接入开屏广告（TTSplashAd）</h3>
<p>SDK为接入方提供了开屏广告，开屏广告建议为用户在进入App时展示的全屏广告。开屏广告为一个View，宽高默认为match_parent,注意开屏广告view：width &gt;=70%屏幕宽；height &gt;=50%屏幕高，否则会影响计费。</p>
<p>开屏广告可支持的尺寸：图片尺寸传入与展示区域大小保持一致，避免素材变形</p>
<p>开屏广告场景也支持个性化模板广告，开发者需要在穿山甲平台申请支持该特性的广告位id，且在构造AdSlot对象时，调用setExpressViewAcceptedSize传入期望的模板广告尺寸大小，详见demo示例。</p>
<h4 id="ttsplashad广告类说明">2.6.1 TTSplashAd广告类说明：</h4>
<p>开屏广告需要通过TTSplashAd类来加载和展示，具体接口如下：</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>函数名称</th>
<th>函数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TTSplashAd(Activity activity, String adUnitId)</td>
<td>构造函数，传入acitivty参数和广告位ID</td>
</tr>
<tr class="even">
<td>loadAd(AdSlot adSlot, TTSplashAdLoadCallback splashAdLoadCallback, int loadTimeOut)</td>
<td>加载开屏广告，参数：adSlot 请求配置参数，splashAdLoadCallback加载成功失败回调 ，loadTimeOut加载超时时间</td>
</tr>
<tr class="odd">
<td>setTTAdSplashListener(TTSplashAdListener splashListener)</td>
<td>设置开屏广告交互事件</td>
</tr>
<tr class="even">
<td>showAd(ViewGroup containerView)</td>
<td>展示开屏广告，传入父级容器containerView</td>
</tr>
<tr class="odd">
<td>Destroy()</td>
<td>资源回收销毁函数</td>
</tr>
</tbody>
</table>
<h4 id="加载开屏广告">2.6.2 加载开屏广告</h4>
<p>接入方可调用TTSplashAd.loadAd(AdSlot adSlot, TTSplashAdLoadCallback splashAdLoadCallback, int loadTimeOut)异步加载开屏广告。adslot为请求广告的信息，splashAdLoadCallback为广告加载状态的回调，loadTimeOut为加载开屏广告允许的最长时间（注：建议timeOut &gt; 3000ms）。调用示例如下：</p>
<p><strong>注：每次加载开屏广告的时候需要新建一个TTSplashAd，否则可能会出现广告填充问题（ 例如：mTTSplashAd = new TTSplashAd(this, “801121974”);）</strong></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true"></a> mTTSplashAd = <span class="kw">new</span> <span class="fu">TTSplashAd</span>(<span class="kw">this</span>, <span class="st">&quot;801121974&quot;</span>);</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true"></a>        mTTSplashAd.<span class="fu">setTTAdSplashListener</span>(mSplashAdListener);</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true"></a>        <span class="co">//step3:创建开屏广告请求参数AdSlot,具体参数含义参考文档</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true"></a>        AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true"></a>                .<span class="fu">setSupportDeepLink</span>(<span class="kw">true</span>)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true"></a>                .<span class="fu">setImageAdSize</span>(<span class="dv">1080</span>, <span class="dv">1920</span>)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true"></a>                .<span class="fu">build</span>();</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true"></a>        <span class="co">//step4:请求广告，调用开屏广告异步请求接口，对请求回调的广告作渲染处理</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true"></a>        mTTSplashAd.<span class="fu">loadAd</span>(adSlot, <span class="kw">new</span> <span class="fu">TTSplashAdLoadCallback</span>() {</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSplashAdLoadFail</span>(AdError adError) {</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true"></a>                Log.<span class="fu">d</span>(TAG, adError.<span class="fu">message</span>);</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true"></a>                mHasLoaded = <span class="kw">true</span>;</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true"></a>                <span class="fu">goToMainActivity</span>();</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true"></a>            }</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true"></a></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSplashAdLoadSuccess</span>() {</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true"></a>                <span class="kw">if</span> (mTTSplashAd != <span class="kw">null</span>) {</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true"></a>                    mTTSplashAd.<span class="fu">showAd</span>(mSplashContainer);</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true"></a>                }</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true"></a>            }</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true"></a></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdLoadTimeout</span>() {</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true"></a>                mHasLoaded = <span class="kw">true</span>;</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true"></a>                <span class="fu">goToMainActivity</span>();</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true"></a>            }</span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true"></a>        }, AD_TIME_OUT);</span></code></pre></div>
<h4 id="设置开屏广告交互监听">2.6.3 设置开屏广告交互监听</h4>
<p>开屏广告交互事件回调监听如下：</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true"></a><span class="kw">public</span> <span class="kw">interface</span> TTSplashAdListener{</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true"></a>     <span class="co">*</span> Splash广告的点击回调</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdClicked</span>();</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true"></a>     <span class="co">*</span> Splash广告的展示回调</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdShow</span>();</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true"></a></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true"></a>     <span class="co">*</span> 点击跳过时回调</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdSkip</span>();</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true"></a></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true"></a>     <span class="co">*</span> 广告关闭时调用，可能是用户关闭或者展示时间到。</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true"></a>     <span class="co">*</span> 此时一般需要跳过开屏的 Activity，进入应用内容页面</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true"></a>     <span class="co">*</span> 广告播放时间结束 <span class="co">--</span>》onAdDismissed<span class="co">(</span>GDT<span class="co">)</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdDismiss</span>();</span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true"></a>}</span></code></pre></div>
<p>加载开屏广告具体示例详见Demo中的SplashActivity。</p>
<h3 id="接入插屏广告ttinterstitialad">2.7 接入插屏广告（TTInterstitialAd）</h3>
<p>本SDK为接入方提供插屏广告，该广告的效果为在activity之上弹出一个dialog。使用场景包括但不限于： 1、进入时展开：用户进入app首页或者用户进入详情页，弹出插屏广告； 2、滑到底部展开：用户在详情页浏览，浏览到最底部，弹出插屏广告； 3、回滑时展开：用户滑动返回上一页面，弹出插屏广告；</p>
<p>注意：这里针对穿山甲SDK的插屏广告尺寸支持： 1:1, 3:2, 2:3 ，可在请求传参过程中，需要按照比例的实际尺寸请求，比如1：1的尺寸，可以请求600x600。Admob 和 Mintegral 仅支持全屏插屏 ，GDT 支持不同比例插屏需要在GDT管理后台设置。</p>
<h4 id="ttinterstitialad接口说明">2.7.1 TTInterstitialAd接口说明：</h4>
<p>加载插屏广告需要通过TTInterstitialAd类，主要方法说明如下：</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>函数名称</th>
<th>函数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TTInterstitialAd(Activity activity, String adUnitId)</td>
<td>构造函数，传入activity和广告位ID</td>
</tr>
<tr class="even">
<td>loadAd(AdSlot adSlot, TTInterstitialAdLoadCallback interstitialAdLoadCallback)</td>
<td>加载广告，adslot请求配置参数，TTInterstitialAdLoadCallback 加载成功失败回调</td>
</tr>
<tr class="odd">
<td>setTTAdInterstitialListener(TTInterstitialAdListener adInterstitialListener)</td>
<td>设置插屏广告的交互监听器</td>
</tr>
<tr class="even">
<td>isReady()</td>
<td>判断广告是否已准备好，一般在show之前调用</td>
</tr>
<tr class="odd">
<td>showAd(Activity activity)</td>
<td>展示插屏广告，参数传入Activity</td>
</tr>
<tr class="even">
<td>boolean isReady()</td>
<td>判断插屏广告是否已准备好，一般在show之前调用</td>
</tr>
<tr class="odd">
<td>destroy()</td>
<td>广告展示完成后销毁并回收资源</td>
</tr>
</tbody>
</table>
<h4 id="加载插屏广告">2.7.2 加载插屏广告</h4>
<p>接入方可调用mInterstitialAd.loadAd(AdSlot adSlot, TTInterstitialAdLoadCallback interstitialAdLoadCallback)异步加载插屏广告，adslot为请求广告的信息，interstitialAdLoadCallback为广告加载成功或失败的回调。具体示例如下：</p>
<p><strong>注：每次加载插屏广告的时候需要新建一个TTInterstitialAd，否则可能会出现广告填充问题（ 例如：mInterstitialAd = new TTInterstitialAd(this, adUnitId);）</strong></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true"></a>    </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true"></a>    <span class="kw">private</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span> mSettingConfigCallback = <span class="kw">new</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span>() {</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">configLoad</span>() {</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 在config 回调中加载广告&quot;</span>);</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true"></a>            <span class="fu">loadInteractionAd</span>();</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true"></a>        }</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true"></a>    };</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true"></a>    </span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true"></a></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true"></a>     <span class="co">*</span> 加载插屏广告</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadAdWithCallback</span>(){</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true"></a>         <span class="co">*</span> 判断当前是否存在config 配置 ，如果存在直接加载广告 ，如果不存在则注册config加载回调</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true"></a>        <span class="kw">if</span> (TTAdsSdk.<span class="fu">configLoadSuccess</span>()) {</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置存在，直接加载广告&quot;</span>);</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true"></a>            <span class="fu">loadInteractionAd</span>();</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true"></a>        } <span class="kw">else</span> {</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置不存在，正在请求config配置....&quot;</span>);</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true"></a>            TTAdsSdk.<span class="fu">registerConfigCallback</span>(mSettingConfigCallback);</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true"></a>        }</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true"></a>    }</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true"></a>    </span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true"></a>    </span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadInteractionAd</span>(<span class="dt">final</span> <span class="bu">String</span> adUnitId) {</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true"></a>        <span class="co">//Context 必须传activity</span></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true"></a>        mInterstitialAd = <span class="kw">new</span> <span class="fu">TTInterstitialAd</span>(<span class="kw">this</span>, adUnitId);</span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true"></a></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true"></a>        <span class="co">//创建插屏广告请求参数AdSlot,具体参数含义参考文档</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true"></a>        AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true"></a>                .<span class="fu">setSupportDeepLink</span>(<span class="kw">true</span>)</span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true"></a>                .<span class="fu">setImageAdSize</span>(<span class="dv">600</span>, <span class="dv">600</span>) <span class="co">//根据广告平台选择的尺寸（目前该比例规格仅对穿山甲SDK生效，插屏广告支持的广告尺寸：  1:1, 3:2, 2:3）</span></span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true"></a>                .<span class="fu">build</span>();</span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true"></a>        <span class="co">//请求广告，调用插屏广告异步请求接口</span></span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true"></a>        mInterstitialAd.<span class="fu">loadAd</span>(adSlot, <span class="kw">new</span> <span class="fu">TTInterstitialAdLoadCallback</span>() {</span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onInterstitialLoadFail</span>(AdError adError) {</span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true"></a>                isLoadSuccess = <span class="kw">false</span>;</span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true"></a>            }</span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true"></a></span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onInterstitialLoad</span>() {</span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true"></a>                isLoadSuccess = <span class="kw">true</span>;</span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true"></a>            }</span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true"></a>        });</span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true"></a>    }</span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true"></a>    </span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true"></a>    </span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true"></a>    <span class="at">@Override</span></span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true"></a>        <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb41-56"><a href="#cb41-56" aria-hidden="true"></a>        <span class="co">//注销config回调</span></span>
<span id="cb41-57"><a href="#cb41-57" aria-hidden="true"></a>        TTAdsSdk.<span class="fu">unregisterConfigCallback</span>(mSettingConfigCallback);</span>
<span id="cb41-58"><a href="#cb41-58" aria-hidden="true"></a>        <span class="kw">if</span> (mInterstitialAd != <span class="kw">null</span>) {</span>
<span id="cb41-59"><a href="#cb41-59" aria-hidden="true"></a>            mInterstitialAd.<span class="fu">destroy</span>();</span>
<span id="cb41-60"><a href="#cb41-60" aria-hidden="true"></a>        }</span>
<span id="cb41-61"><a href="#cb41-61" aria-hidden="true"></a>    }</span></code></pre></div>
<h4 id="展示插屏广告">2.7.3 展示插屏广告</h4>
<p>在展示插屏广告之前可先调用 <code>isRead()</code> 判断广告是否已准备好再调用show方法展示广告</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true"></a><span class="kw">if</span> (isLoadSuccess &amp;&amp; mInterstitialAd != <span class="kw">null</span> &amp;&amp; mInterstitialAd.<span class="fu">isReady</span>()) {</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true"></a>        <span class="co">//设置监听器</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true"></a>       mInterstitialAd.<span class="fu">setTTAdInterstitialListener</span>(interstitialListener);</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true"></a>       mInterstitialAd.<span class="fu">showAd</span>(<span class="kw">this</span>);</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>详细代码示例见demo的InterstitialActivity类 #### 2.7.4 设置插屏广告交互监听器 插屏广告的交互回调监听是TTInterstitialAdListener，具体回调方法如下：</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true"></a>    <span class="kw">public</span> <span class="kw">interface</span> TTInterstitialAdListener{</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true"></a>    </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true"></a>     <span class="co">*</span> 广告展示</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onInterstitialShow</span>();</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true"></a>    </span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true"></a>     <span class="co">*</span> 广告被点击</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onInterstitialAdClick</span>();</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true"></a></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true"></a>     <span class="co">*</span> 关闭广告</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onInterstitialClosed</span>();</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true"></a>     <span class="co">*</span> 当广告打开浮层时调用，如打开内置浏览器、内容展示浮层，一般发生在点击之后</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true"></a>     <span class="co">*</span> 常常在onAdLeftApplication之前调用，并非百分百回调，穿山甲SDK不支持</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdOpened</span>();</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true"></a>    </span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true"></a>     <span class="co">*</span> 此方法会在用户点击打开其他应用（例如 Google Play）时</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true"></a>     <span class="co">*</span> 于 onAdOpened<span class="co">()</span> 之后调用，从而在后台运行当前应用。</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true"></a>     <span class="co">*</span> 并非百分百回调，穿山甲SDK不支持</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onAdLeftApplication</span>();</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true"></a>}</span></code></pre></div>
<p>加载及展示插屏广告具体示例详见Demo中的InteractionActivity。</p>
<h3 id="接入激励视频广告ttrewardvideoad">2.8 接入激励视频广告（TTRewardVideoAd）</h3>
<p>本SDK为接入方提供激励视频广告，该广告的效果为观看完毕视频广告，发放奖励给用户。使用场景包括但不限于： 1、游戏等应用内观看视频广告获得游戏内金币等：用户必须观看完整视频才能获取奖励； 2、积分类应用接入； 支持的广告尺寸： 全屏横屏播放和竖屏，默认横屏</p>
<h4 id="ttrewardad类说明">2.8.1 TTRewardAd类说明：</h4>
<p>请求激励视频需要调用TTRewardAd的相关方法，说明如下：</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>函数名称</th>
<th>函数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TTRewardAd(Context context, String ritId)</td>
<td>构造方法，参数：Activity ，adUnitId，广告位Id</td>
</tr>
<tr class="even">
<td>loadRewardAd(AdSlot adSlot, TTRewardedAdLoadCallback listener)</td>
<td>AdSlot请求配置信息，加载监听回调TTRewardedAdLoadCallback</td>
</tr>
<tr class="odd">
<td>showRewardAd(Activity activity, TTRewardedAdListener adRewardedListener)</td>
<td>展示全屏广告，交互监听TTRewardedAdListener</td>
</tr>
<tr class="even">
<td>isReady()</td>
<td>判断广告是否已准备好，一般在show之前调用</td>
</tr>
<tr class="odd">
<td>destroy()</td>
<td>资源回收与销毁</td>
</tr>
</tbody>
</table>
<h4 id="加载激励视频广告">2.8.2 加载激励视频广告</h4>
<p>接入方可调用loadRewardAd(AdSlot adSlot, <span class="citation" data-cites="NonNull">@NonNull</span> TTRewardedAdLoadCallback listener)异步加载激励视频广告，adslot为请求广告的信息，RewardVideoAdListener为广告加载成功或失败的回调，回调均在主线程执行。</p>
<p><strong>注：每次加载激励视频广告的时候需要新建一个TTRewardAd，否则可能会出现广告填充问题（ 例如：mttRewardAd = new TTRewardAd(this, “901121543”);）</strong></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true"></a> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true"></a> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true"></a>     <span class="co">*</span> config回调</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true"></a>    <span class="kw">private</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span> mSettingConfigCallback = <span class="kw">new</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span>() {</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">configLoad</span>() {</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 在config 回调中加载广告&quot;</span>);</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true"></a>            <span class="fu">loadAd</span>(adUnitId, orientation);</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true"></a>        }</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true"></a>    };</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true"></a></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true"></a>     <span class="co">*</span> 加载广告</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">laodAdWithCallback</span>(<span class="dt">final</span> <span class="bu">String</span> adUnitId, <span class="dt">final</span> <span class="dt">int</span> orientation) {</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true"></a>         <span class="co">*</span> 判断当前是否存在config 配置 ，如果存在直接加载广告 ，如果不存在则注册config加载回调</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true"></a>        <span class="kw">if</span> (TTAdsSdk.<span class="fu">configLoadSuccess</span>()) {</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置存在，直接加载广告&quot;</span>);</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true"></a>            <span class="fu">loadAd</span>(adUnitId, orientation);</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true"></a>        } <span class="kw">else</span> {</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置不存在，正在请求config配置....&quot;</span>);</span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true"></a>            TTAdsSdk.<span class="fu">registerConfigCallback</span>(mSettingConfigCallback); <span class="co">//不用使用内部类，否则在ondestory中无法移除该回调</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true"></a>        }</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true"></a>    }</span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true"></a>    </span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true"></a>    </span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true"></a> <span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadAd</span>(<span class="dt">final</span> <span class="bu">String</span> adUnitId, <span class="dt">int</span> orientation) {</span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true"></a>        mttRewardAd = <span class="kw">new</span> <span class="fu">TTRewardAd</span>(<span class="kw">this</span>, <span class="st">&quot;901121543&quot;</span>);</span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true"></a>        <span class="co">//创建广告请求参数AdSlot,具体参数含义参考文档</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true"></a>        AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true"></a>                .<span class="fu">setSupportDeepLink</span>(<span class="kw">true</span>)</span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true"></a>                .<span class="fu">setAdStyleType</span>(AdSlot.<span class="fu">TYPE_EXPRESS_AD</span>)<span class="co">//AdSlot.TYPE_EXPRESS_AD 标识pangle使用动态模板激励视频;AdSlot.TYPE_NATIVE_AD:使用原生激励视频</span></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true"></a>                .<span class="fu">setRewardName</span>(<span class="st">&quot;金币&quot;</span>) <span class="co">//奖励的名称</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true"></a>                .<span class="fu">setRewardAmount</span>(<span class="dv">3</span>)  <span class="co">//奖励的数量</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true"></a>                .<span class="fu">setUserID</span>(<span class="st">&quot;user123&quot;</span>)<span class="co">//用户id,必传参数</span></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true"></a>                .<span class="fu">setOrientation</span>(orientation) <span class="co">//必填参数，期望视频的播放方向：TTAdConstant.HORIZONTAL 或 TTAdConstant.VERTICAL</span></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true"></a>                .<span class="fu">build</span>();</span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true"></a>        </span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true"></a>        <span class="co">//请求广告</span></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true"></a>        mttRewardAd.<span class="fu">loadRewardAd</span>(adSlot, <span class="kw">new</span> <span class="fu">TTRewardedAdLoadCallback</span>() {</span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true"></a></span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRewardVideoLoadFail</span>(AdError adError) {</span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true"></a>                loadSuccess = <span class="kw">false</span>;</span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true"></a>            }</span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true"></a></span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRewardVideoAdLoad</span>() {</span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true"></a>                loadSuccess = <span class="kw">true</span>;</span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true"></a>            }</span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true"></a></span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true"></a>            <span class="at">@Override</span></span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRewardVideoCached</span>() {</span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true"></a>                loadSuccess = <span class="kw">true</span>;<span class="co">//激励视频资源加载成功</span></span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true"></a>            }</span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true"></a>        });</span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true"></a>    }</span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true"></a>    </span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true"></a>    <span class="at">@Override</span></span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true"></a>        <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true"></a>        TTAdsSdk.<span class="fu">unregisterConfigCallback</span>(mSettingConfigCallback);</span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true"></a>        <span class="kw">if</span> (mttRewardAd != <span class="kw">null</span>) {</span>
<span id="cb44-68"><a href="#cb44-68" aria-hidden="true"></a>            mttRewardAd.<span class="fu">destroy</span>();</span>
<span id="cb44-69"><a href="#cb44-69" aria-hidden="true"></a>        }</span>
<span id="cb44-70"><a href="#cb44-70" aria-hidden="true"></a>    }</span></code></pre></div>
<h4 id="展示激励视频广告">2.8.3 展示激励视频广告</h4>
<p>接入方可调用showRewardAd(Activity activity, TTRewardedAdListener adRewardedListener)展示激励视频广告，activity为界面Activity，adRewardedListener为激励视频交互回调。在调用showRewardAd之前可先调用<code>isReady()</code> 方法判断广告是否已准备好</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true"></a> <span class="kw">if</span> (loadSuccess &amp;&amp; mttRewardAd != <span class="kw">null</span> &amp;&amp; mttRewardAd.<span class="fu">isReady</span>()) {</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true"></a>     <span class="co">//在获取到广告后展示,强烈建议在onRewardVideoCached回调后，展示广告，提升播放体验</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true"></a>     <span class="co">//该方法直接展示广告</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true"></a>     <span class="co">//展示广告，并传入广告展示的场景</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true"></a>     mttRewardAd.<span class="fu">showRewardAd</span>(RewardVideoActivity.<span class="fu">this</span>, mTTRewardedAdListener);</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true"></a> }</span></code></pre></div>
<p>具体使用请参考demo示例。</p>
<h4 id="设置激励视频交互回调">2.8.4 设置激励视频交互回调</h4>
<div class="sourceCode" id="cb46"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true"></a><span class="kw">public</span> <span class="kw">interface</span> TTRewardedAdListener <span class="kw">extends</span> ITTAdatperCallback {</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true"></a>   </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true"></a>     <span class="co">*</span> 广告的展示回调</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onRewardedAdShow</span>();</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true"></a>     <span class="co">*</span> 广告的下载bar点击回调<span class="co">-</span>注意Admob的激励视频不会回调该方法</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onRewardClick</span>();</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true"></a></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true"></a>     <span class="co">*</span> 广告关闭的回调</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onRewardedAdClosed</span>();</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true"></a></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true"></a>     <span class="co">*</span> 视频播放完毕的回调 <span class="co">-</span> Admob广告不存在该回调</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onVideoComplete</span>();</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true"></a></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true"></a>     <span class="co">*</span> 视频播放失败的回调 <span class="co">-</span> Mintegral GDT Admob广告不存在该回调</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onVideoError</span>();</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true"></a></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true"></a>     <span class="co">*</span> 激励视频播放完毕，验证是否有效发放奖励的回调</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onRewardVerify</span>(RewardItem rewardItem);</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true"></a>}</span></code></pre></div>
<h4 id="服务器到服务器回调">2.8.5 服务器到服务器回调</h4>
<p>服务器到服务器回调让您判定是否提供奖励给观看广告的用户。当用户成功看完广告时，您可以在头条媒体平台配置从头条服务器到您自己的服务器的回调链接，以通知您用户完成了操作。</p>
<h5 id="回调方式说明针对穿山甲sdk">回调方式说明(针对穿山甲SDK)</h5>
<p>头条服务器会以 GET 方式请求第三方服务的回调链接，并拼接以下参数回传：</p>
<p><code>user_id=%s&amp;trans_id=%s&amp;reward_name=%s&amp;reward_amount=%d&amp;extra=%s&amp;sign=%s</code></p>
<table>
<thead>
<tr class="header">
<th>字段名称</th>
<th>字段定义</th>
<th>字段类型</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>sign</td>
<td>签名</td>
<td>string</td>
<td>签名</td>
</tr>
<tr class="even">
<td>user_id</td>
<td>用户id</td>
<td>string</td>
<td>调用SDK透传，应用对用户的唯一标识</td>
</tr>
<tr class="odd">
<td>trans_id</td>
<td>交易id</td>
<td>string</td>
<td>完成观看的唯一交易ID</td>
</tr>
<tr class="even">
<td>reward_amount</td>
<td>奖励数量</td>
<td>int</td>
<td>媒体平台配置或调用SDK传入</td>
</tr>
<tr class="odd">
<td>reward_name</td>
<td>奖励名称</td>
<td>string</td>
<td>媒体平台配置或调用SDK传入</td>
</tr>
<tr class="even">
<td>extra</td>
<td>Extra</td>
<td>string</td>
<td>调用SDK传入并透传，如无需要则为空</td>
</tr>
</tbody>
</table>
<h5 id="签名生成方式">签名生成方式</h5>
<p>appSecurityKey: 您在头条媒体平台新建奖励视频代码位获取到的密钥 transId：交易id sign = sha256(appSecurityKey:transId)</p>
<p>Python 示例：</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true"></a><span class="im">import</span> hashlib</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true"></a>    trans_id <span class="op">=</span> <span class="st">&quot;6FEB23ACB0374985A2A52D282EDD5361u6643&quot;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true"></a>    app_security_key <span class="op">=</span> <span class="st">&quot;7ca31ab0a59d69a42dd8abc7cf2d8fbd&quot;</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true"></a>    check_sign_raw <span class="op">=</span> <span class="st">&quot;</span><span class="sc">%s</span><span class="st">:</span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span> (app_security_key, trans_id)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true"></a>    sign <span class="op">=</span> hashlib.sha256(check_sign_raw).hexdigest()</span></code></pre></div>
<h5 id="返回约定">返回约定</h5>
<p>返回 json 数据，字段如下：</p>
<table>
<thead>
<tr class="header">
<th>字段名称</th>
<th>字段定义</th>
<th>字段类型</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>isValid</td>
<td>校验结果</td>
<td>bool</td>
<td>判定结果，是否发放奖励</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<pre><code>{
    &quot;isValid&quot;: true
}</code></pre>
<h3 id="接入全屏视频广告ttfullscreenvideoad">2.9 接入全屏视频广告（TTFullScreenVideoAd）</h3>
<p>本SDK为接入方提供全屏视频广告，该广告的效果播放全屏的视频，视频一定时间后可跳过，无需全程观看完。 支持的广告尺寸： 全屏横屏播放和竖屏，默认横屏</p>
<h4 id="ttfullvideoad类说明">2.9.1 TTFullVideoAd类说明：</h4>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>函数名称</th>
<th>函数说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TTFullVideoAd(Activity activity,String adUnitId)</td>
<td>构造方法，参数：Activity ，adUnitId，广告位Id</td>
</tr>
<tr class="even">
<td>loadFullAd(AdSlot adSlot, <span class="citation" data-cites="NonNull">@NonNull</span> TTFullVideoAdLoadCallback listener)</td>
<td>AdSlot请求配置信息，加载监听回调TTFullVideoAdLoadCallback</td>
</tr>
<tr class="odd">
<td>showFullAd(Activity activity, TTFullVideoAdListener fullVideoAdListener)</td>
<td>展示全屏广告，交互监听TTFullVideoAdListener</td>
</tr>
<tr class="even">
<td>boolean isReady()</td>
<td>判断广告是否已准备好，一般在showFullAd之前调用</td>
</tr>
<tr class="odd">
<td>destroy()</td>
<td>清理回收资源</td>
</tr>
</tbody>
</table>
<h4 id="加载全屏视频广告">2.9.2 加载全屏视频广告</h4>
<p>接入方可调用<code>loadFullAd(AdSlot adSlot, @NonNull TTFullVideoAdLoadCallback listener)</code>异步加载全屏视频广告，adslot为请求广告的信息，TTFullVideoAdLoadCallback为广告加载成功或失败的回调。</p>
<p><strong>注：每次加载全屏视频广告的时候需要新建一个TTFullVideoAd，否则可能会出现广告填充问题（ 例如：mTTFullVideoAd = new TTFullVideoAd(this, “901121073”);）</strong></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true"></a>    </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true"></a>     <span class="co">/**</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true"></a>     <span class="co">*</span> config回调</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true"></a>    <span class="kw">private</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span> mSettingConfigCallback = <span class="kw">new</span> TTAdsSdk.<span class="fu">SettingConfigCallback</span>() {</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">configLoad</span>() {</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 在config 回调中加载广告&quot;</span>);</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true"></a>            <span class="fu">loadAd</span>();</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true"></a>        }</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true"></a>    };</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true"></a>     <span class="co">*</span> 加载广告</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadAdWithCallback</span>() {</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true"></a>        <span class="co">/**</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true"></a>         <span class="co">*</span> 判断当前是否存在config 配置 ，如果存在直接加载广告 ，如果不存在则注册config加载回调</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true"></a>         <span class="co">*/</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true"></a>        <span class="kw">if</span> (TTAdsSdk.<span class="fu">configLoadSuccess</span>()) {</span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置存在，直接加载广告&quot;</span>);</span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true"></a>            <span class="fu">loadAd</span>();</span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true"></a>        } <span class="kw">else</span> {</span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true"></a>            Log.<span class="fu">e</span>(TAG, <span class="st">&quot;load ad 当前config配置不存在，正在请求config配置....&quot;</span>);</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true"></a>            TTAdsSdk.<span class="fu">registerConfigCallback</span>(mSettingConfigCallback); <span class="co">//不能使用内部类，否则在ondestory中无法移除该回调</span></span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true"></a>        }</span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true"></a>    }</span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true"></a> </span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true"></a> <span class="kw">private</span> <span class="dt">void</span> <span class="fu">loadAd</span>(<span class="dt">final</span> <span class="bu">String</span> adUnitId, <span class="dt">int</span> orientation) {</span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true"></a>    mTTFullVideoAd = <span class="kw">new</span> <span class="fu">TTFullVideoAd</span>(<span class="kw">this</span>, <span class="st">&quot;901121073&quot;</span>);</span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true"></a>     <span class="co">//step4:创建广告请求参数AdSlot,具体参数含义参考文档</span></span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true"></a>     AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true"></a>             .<span class="fu">setSupportDeepLink</span>(<span class="kw">true</span>)</span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true"></a>             .<span class="fu">setAdStyleType</span>(AdSlot.<span class="fu">TYPE_EXPRESS_AD</span>)<span class="co">//AdSlot.TYPE_EXPRESS_AD 标识pangle使用动态模板全屏视频;AdSlot.TYPE_NATIVE_AD:使用原生全屏视频</span></span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true"></a>             .<span class="fu">setRewardName</span>(<span class="st">&quot;金币&quot;</span>) <span class="co">//奖励的名称</span></span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true"></a>             .<span class="fu">setRewardAmount</span>(<span class="dv">3</span>)  <span class="co">//奖励的数量</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true"></a>             .<span class="fu">setUserID</span>(<span class="st">&quot;user123&quot;</span>)<span class="co">//用户id,必传参数</span></span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true"></a>             .<span class="fu">setMediaExtra</span>(<span class="st">&quot;media_extra&quot;</span>) <span class="co">//附加参数，可选</span></span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true"></a>             .<span class="fu">setOrientation</span>(orientation) <span class="co">//必填参数，期望视频的播放方向：TTAdConstant.HORIZONTAL 或 TTAdConstant.VERTICAL</span></span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true"></a>             .<span class="fu">build</span>();</span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true"></a></span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true"></a></span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true"></a>     <span class="co">//请求广告</span></span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true"></a>     mTTFullVideoAd.<span class="fu">loadFullAd</span>(adSlot, <span class="kw">new</span> <span class="fu">TTFullVideoAdLoadCallback</span>() {</span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true"></a></span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true"></a>         <span class="at">@Override</span></span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true"></a>         <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onFullVideoLoadFail</span>(AdError adError) {</span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true"></a>             loadSuccess = <span class="kw">false</span>;</span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true"></a>         }</span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true"></a></span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true"></a>         <span class="at">@Override</span></span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true"></a>         <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onFullVideoAdLoad</span>() {</span>
<span id="cb49-53"><a href="#cb49-53" aria-hidden="true"></a>             loadSuccess = <span class="kw">true</span>;</span>
<span id="cb49-54"><a href="#cb49-54" aria-hidden="true"></a>         }</span>
<span id="cb49-55"><a href="#cb49-55" aria-hidden="true"></a></span>
<span id="cb49-56"><a href="#cb49-56" aria-hidden="true"></a>         <span class="at">@Override</span></span>
<span id="cb49-57"><a href="#cb49-57" aria-hidden="true"></a>         <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onFullVideoCached</span>() {</span>
<span id="cb49-58"><a href="#cb49-58" aria-hidden="true"></a>             loadSuccess = <span class="kw">true</span>;</span>
<span id="cb49-59"><a href="#cb49-59" aria-hidden="true"></a>         }</span>
<span id="cb49-60"><a href="#cb49-60" aria-hidden="true"></a>     });</span>
<span id="cb49-61"><a href="#cb49-61" aria-hidden="true"></a> }</span>
<span id="cb49-62"><a href="#cb49-62" aria-hidden="true"></a>    <span class="at">@Override</span></span>
<span id="cb49-63"><a href="#cb49-63" aria-hidden="true"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb49-64"><a href="#cb49-64" aria-hidden="true"></a>        <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb49-65"><a href="#cb49-65" aria-hidden="true"></a>        <span class="co">//注销config回调</span></span>
<span id="cb49-66"><a href="#cb49-66" aria-hidden="true"></a>        TTAdsSdk.<span class="fu">unregisterConfigCallback</span>(mSettingConfigCallback);</span>
<span id="cb49-67"><a href="#cb49-67" aria-hidden="true"></a>        <span class="kw">if</span> (mTTFullVideoAd != <span class="kw">null</span>) {</span>
<span id="cb49-68"><a href="#cb49-68" aria-hidden="true"></a>            mTTFullVideoAd.<span class="fu">destroy</span>();</span>
<span id="cb49-69"><a href="#cb49-69" aria-hidden="true"></a>        }</span>
<span id="cb49-70"><a href="#cb49-70" aria-hidden="true"></a>    }</span>
<span id="cb49-71"><a href="#cb49-71" aria-hidden="true"></a> </span>
<span id="cb49-72"><a href="#cb49-72" aria-hidden="true"></a> </span></code></pre></div>
<h4 id="展示全屏视频广告">2.9.3 展示全屏视频广告</h4>
<p>接入方可调用showFullAd(Activity activity, TTFullVideoAdListener fullVideoAdListener)异步加载激励视频广告，activity为宿主activity，fullVideoAdListener为全屏视频交互回调。在调用展示方法之前，可调用<code>isReady()</code>方法先判断广告是否已准备好</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true"></a><span class="kw">if</span> (loadSuccess &amp;&amp; mTTFullVideoAd != <span class="kw">null</span> &amp;&amp; mTTFullVideoAd.<span class="fu">isReady</span>()) {</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true"></a>        <span class="co">//在获取到广告后展示,强烈建议在onFullVideoCached回调后，展示广告，提升播放体验</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true"></a>       <span class="co">//该方法直接展示广告</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true"></a>       <span class="co">//展示广告，并传入广告展示的场景</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true"></a>       mTTFullVideoAd.<span class="fu">showFullAd</span>(FullVideoActivity.<span class="fu">this</span>, mTTFullVideoAdListener);</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true"></a>}</span></code></pre></div>
<h4 id="设置全屏视频交互回调">2.9.4 设置全屏视频交互回调</h4>
<div class="sourceCode" id="cb51"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true"></a>   <span class="kw">public</span> <span class="kw">interface</span> TTFullVideoAdListener <span class="kw">extends</span> ITTAdatperCallback {</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true"></a>    </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true"></a>     <span class="co">*</span> 广告的展示回调</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onFullVideoAdShow</span>();</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true"></a></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true"></a>     <span class="co">*</span> 广告的下载bar点击回调</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onFullVideoAdClick</span>();</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true"></a></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true"></a>     <span class="co">*</span> 广告关闭的回调</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onFullVideoAdClosed</span>();</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true"></a></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true"></a>     <span class="co">*</span> 视频播放完毕的回调<span class="co">-</span> Admob广告不存在该回调，</span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onVideoComplete</span>();</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true"></a></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true"></a>     <span class="co">*</span> 视频播放失败的回调<span class="co">-</span> Mintegral GDT Admob广告不存在该回调，仅穿山甲SDK广告回调</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onVideoError</span>();</span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true"></a></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true"></a>     <span class="co">*</span> 跳过视频播放 <span class="co">-</span> Mintegral GDT Admob广告不存在该回调，仅穿山甲SDK广告回调</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true"></a>     <span class="co">*/</span></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true"></a>    <span class="dt">void</span> <span class="fu">onSkippedVideo</span>();</span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true"></a>}</span></code></pre></div>
<p>详细代码请参考demo中的FullVideoActivity。</p>
<h3 id="接入dislike逻辑针对穿山甲sdk单独处理的逻辑">3.0 接入Dislike逻辑（针对穿山甲SDK单独处理的逻辑）</h3>
<p>SDK为接入方提供了信息流广告Dislike逻辑，当用户选择关闭广告时候，会有提示询问用户，包含“不感兴趣”、“看过了”选项供用户选择。该反馈主要用于头条广告对用户端的广告策略，用来优化提升广告的点击率，提升广告效果及合作伙伴的收益。</p>
<h4 id="信息流广告接入dislike">3.1 信息流广告接入Dislike</h4>
<p>在获得TTNativeAd后，先通过<code>boolean hasDislike()</code>方法判断当前广告是否存在dislike，如果存在分别对原生信息流广告和模板信息流广告进行dislike的设置具体方式如下：</p>
<h5 id="原生信息流广告的dislike的设置">3.1.1 原生信息流广告的Dislike的设置</h5>
<div class="sourceCode" id="cb52"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true"></a><span class="co">//设置dislike弹窗，如果有</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true"></a><span class="kw">if</span> (ad.<span class="fu">hasDislike</span>()) {</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true"></a>    <span class="dt">final</span> TTAdDislike ttAdDislike = ad.<span class="fu">getDislikeDialog</span>((Activity) mContext);</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true"></a>    adViewHolder.<span class="fu">mDislike</span>.<span class="fu">setVisibility</span>(<span class="bu">View</span>.<span class="fu">VISIBLE</span>);</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true"></a>    adViewHolder.<span class="fu">mDislike</span>.<span class="fu">setOnClickListener</span>(<span class="kw">new</span> <span class="bu">View</span>.<span class="fu">OnClickListener</span>() {</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onClick</span>(<span class="bu">View</span> v) {</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true"></a>            <span class="co">//使用接口来展示</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true"></a>            ttAdDislike.<span class="fu">showDislikeDialog</span>();</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true"></a>            ttAdDislike.<span class="fu">setDislikeCallback</span>(<span class="kw">new</span> <span class="fu">TTDislikeCallback</span>() {</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true"></a>                <span class="at">@Override</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSelected</span>(<span class="dt">int</span> position, <span class="bu">String</span> value) {</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击 &quot;</span> + value);</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true"></a>                    <span class="co">//用户选择不喜欢原因后，移除广告展示</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true"></a>                    mData.<span class="fu">remove</span>(ad);</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true"></a>                    sumCount--;<span class="co">//总数也要减少</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true"></a>                    <span class="fu">notifyDataSetChanged</span>();</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true"></a>                }</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true"></a></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true"></a>                <span class="at">@Override</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCancel</span>() {</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;dislike 点击了取消&quot;</span>);</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true"></a>                }</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true"></a>            });</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true"></a>        }</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true"></a>    });</span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true"></a>} </span></code></pre></div>
<h5 id="模板信息流广告的dislike的设置">3.1.2 模板信息流广告的Dislike的设置</h5>
<div class="sourceCode" id="cb53"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true"></a> <span class="co">//判断是否存在dislike按钮</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true"></a><span class="kw">if</span> (ad.<span class="fu">hasDislike</span>()) {</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true"></a>    ad.<span class="fu">setDislikeCallback</span>((Activity) mContext, <span class="kw">new</span> <span class="fu">TTDislikeCallback</span>() {</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSelected</span>(<span class="dt">int</span> position, <span class="bu">String</span> value) {</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true"></a>            TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击 &quot;</span> + value);</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true"></a>            <span class="co">//用户选择不喜欢原因后，移除广告展示</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true"></a>            mData.<span class="fu">remove</span>(ad);</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true"></a>            sumCount--;</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true"></a>            <span class="fu">notifyDataSetChanged</span>();</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true"></a>        }</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true"></a></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true"></a>        <span class="at">@Override</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCancel</span>() {</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true"></a>            TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;dislike 点击了取消&quot;</span>);</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true"></a>        }</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true"></a>    });</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true"></a>}</span></code></pre></div>
<h2 id="参考">4.参考</h2>
<h3 id="sdk错误码">4.1 SDK错误码</h3>
<table>
<thead>
<tr class="header">
<th>错误码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>20000</td>
<td>成功</td>
</tr>
<tr class="even">
<td>40000</td>
<td>http content type错误</td>
</tr>
<tr class="odd">
<td>40001</td>
<td>http request pb错误（请求参数类型错误）</td>
</tr>
<tr class="even">
<td>40002</td>
<td>source_type=‘app’, 请求app不能为空</td>
</tr>
<tr class="odd">
<td>40003</td>
<td>source_type=‘wap’, 请求wap不能为空</td>
</tr>
<tr class="even">
<td>40004</td>
<td>广告位不能为空</td>
</tr>
<tr class="odd">
<td>40005</td>
<td>广告位尺寸不能为空</td>
</tr>
<tr class="even">
<td>40006</td>
<td>广告位ID不合法</td>
</tr>
<tr class="odd">
<td>40007</td>
<td>广告数量错误</td>
</tr>
<tr class="even">
<td>40008</td>
<td>图片尺寸错误</td>
</tr>
<tr class="odd">
<td>40009</td>
<td>媒体ID不合法</td>
</tr>
<tr class="even">
<td>40010</td>
<td>媒体类型不合法</td>
</tr>
<tr class="odd">
<td>40011</td>
<td>广告类型不合法</td>
</tr>
<tr class="even">
<td>40012</td>
<td>媒体接入类型不合法，已废弃</td>
</tr>
<tr class="odd">
<td>40013</td>
<td>代码位id小于9亿，但是adType不是开屏</td>
</tr>
<tr class="even">
<td>40014</td>
<td>redirect参数不正确</td>
</tr>
<tr class="odd">
<td>40015</td>
<td>媒体整改超过期限，请求非法</td>
</tr>
<tr class="even">
<td>40016</td>
<td>adUnitId 与 app_id对应关系不合法</td>
</tr>
<tr class="odd">
<td>40017</td>
<td>媒体接入类型不合法 API/SDK</td>
</tr>
<tr class="even">
<td>40018</td>
<td>媒体包名与录入不一致</td>
</tr>
<tr class="odd">
<td>40019</td>
<td>媒体配置adtype和请求不一致</td>
</tr>
<tr class="even">
<td>40020</td>
<td>开发注册新上线广告位超出日请求量限制</td>
</tr>
<tr class="odd">
<td>40021</td>
<td>apk签名sha1值与媒体平台录入不一致</td>
</tr>
<tr class="even">
<td>40022</td>
<td>媒体请求素材是否原生与媒体平台录入不一致</td>
</tr>
<tr class="odd">
<td>40023</td>
<td>os字段填的不对</td>
</tr>
<tr class="even">
<td>40024</td>
<td>sdk 版本过低不返回广告</td>
</tr>
<tr class="odd">
<td>40025</td>
<td>引入SDK包不完整，建议校验SDK包完整性或联系技术支持</td>
</tr>
<tr class="even">
<td>40029</td>
<td>模板广告请求使用了错误的方式，见下方FAQ说明</td>
</tr>
<tr class="odd">
<td>50001</td>
<td>服务器错误</td>
</tr>
<tr class="even">
<td>60001</td>
<td>show event处理错误</td>
</tr>
<tr class="odd">
<td>60002</td>
<td>click event处理错误</td>
</tr>
<tr class="even">
<td>60007</td>
<td>激励视频验证服务器异常或处理失败</td>
</tr>
<tr class="odd">
<td>-1</td>
<td>数据解析失败</td>
</tr>
<tr class="even">
<td>-2</td>
<td>网络错误</td>
</tr>
<tr class="odd">
<td>-3</td>
<td>解析数据没有ad</td>
</tr>
<tr class="even">
<td>-4</td>
<td>返回数据缺少必要字段</td>
</tr>
<tr class="odd">
<td>-5</td>
<td>bannerAd加载图片失败</td>
</tr>
<tr class="even">
<td>-6</td>
<td>插屏广告图片加载失败</td>
</tr>
<tr class="odd">
<td>-7</td>
<td>开屏广告图片加载失败</td>
</tr>
<tr class="even">
<td>-8</td>
<td>频繁请求</td>
</tr>
<tr class="odd">
<td>-9</td>
<td>请求实体为空</td>
</tr>
<tr class="even">
<td>-10</td>
<td>缓存解析失败</td>
</tr>
<tr class="odd">
<td>-11</td>
<td>缓存过期</td>
</tr>
<tr class="even">
<td>-12</td>
<td>缓存中没有开屏广告</td>
</tr>
<tr class="odd">
<td>101</td>
<td>渲染结果数据解析失败</td>
</tr>
<tr class="even">
<td>102</td>
<td>主模板无效</td>
</tr>
<tr class="odd">
<td>103</td>
<td>模板差量无效</td>
</tr>
<tr class="even">
<td>104</td>
<td>物料数据异常</td>
</tr>
<tr class="odd">
<td>105</td>
<td>模板数据解析异常</td>
</tr>
<tr class="even">
<td>106</td>
<td>渲染异常</td>
</tr>
<tr class="odd">
<td>107</td>
<td>渲染超时未回调</td>
</tr>
</tbody>
</table>
<h3 id="常见问题">4.2 常见问题</h3>
<p>1.全局信息：</p>
<ul>
<li>调用TTAdManager.createAdNative(Context context)设置全局信息时，请务必保证传入的context为activity，否则会影响应用下载广告的下载。</li>
</ul>
<p>2.信息流广告：</p>
<ul>
<li>在创建信息流创意广告时请务必调用registerViewForInteraction(ViewGroup container, List clickViews, List creativeViews, AdInteractionListener listener)，否则会影响广告的计费及交互功能；</li>
<li>在调用registerViewForInteraction(ViewGroup container, List clickViews, List creativeViews, AdInteractionListener listener)方法时，如果clickViews、creativeViews中包含了相同的View，该View只会回调创意点击的回调。</li>
</ul>
<p>3.Andriod 7.0及以上 用户点击了“点击安装”后没有反应，或者下载完成后没有调起安装界面。</p>
<ul>
<li>请按照接入文档中适配Android7.0的方法去接入。并且确保support-v4包的版本为24.2.0及以上。</li>
</ul>
<p>4.如何区分落地页广告还是app下载广告？</p>
<ul>
<li>在广告的交互类型中，在浏览器内打开 （普通类型）、落地页（普通类型）、应用下载广告可以区分是落地页广告还是app下载广告。</li>
</ul>
<p>5.信息流视频广告如何记录展示？</p>
<ul>
<li>与信息流逻辑一致，在屏幕展现即可记录一个show</li>
</ul>
<p>6.资源混淆问题：如果您的应用对资源也进行混淆（如andResGuard），请不要混淆穿山甲的任何资源，防止资源找不到崩溃，穿山甲的资源清单请咨询技术支持</p>
<p>7.40029错误码，原因有以下两种 - 1. SDK版本低：您使用的sdk版本不得低于2.5.0.0，麻烦升级到平台最新版本sdk。 - 2. 接口使用错误：创建的代码位类型是模板渲染/非模板渲染，但是请求方法是非模板渲染/模板渲染的方法。解决办法：使用模板渲染的方法去请求模板渲染类型或者使用非模板渲染的方法去请求非模板类型的广告，如果代码位在平台上是模板渲染，可以参考文档中个性化模板XX广告的部分，demo中参考带有express部分的代码。如果代码位不是模板渲染，则不要调用含有express字样的接口。 - 参考文档：https://partner.oceanengine.com/doc?id=5dd0fe716b181e00112e3eb8</p>
<p>8.其他问题请咨询MSDK相关人员。</p>
</body>
</html>
